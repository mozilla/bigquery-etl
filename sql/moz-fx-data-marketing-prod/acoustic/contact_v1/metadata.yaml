friendly_name: Contact Database (Acoustic data)

description: >
  Import Contacts file exported from Acoustic (CSV data)

  Each partition represents CSV data extracted from Acoustic
  each submission_date represents contacts that were last modified
  on the date corresponding to Airflow's execution date

  Data source: https://developer.goacoustic.com/acoustic-campaign/reference/export-from-a-database
  Jira: https://mozilla-hub.atlassian.net/browse/DENG-17

labels:
  incremental: true

owners:
  - kignasiak@mozilla.com

scheduling:
  dag_name: bqetl_acoustic_contact_export
  arguments: ["--submission_date", "{{ ds }}"]
  referenced_tables:
    - ['moz-fx-data-marketing-prod', 'acoustic', 'contact_raw_v1']

bigquery:
  time_partitioning:
    field: last_modified_date
    type: day
    require_partition_filter: false
  clustering:
    fields:
      - double_opt_in
      - has_opted_out_of_email
      - email_lang
      - mailing_country
      - cohort
