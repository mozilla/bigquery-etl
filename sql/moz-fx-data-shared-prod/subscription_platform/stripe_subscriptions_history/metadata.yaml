friendly_name: Stripe subscriptions history
description: |-
  History of changes to Stripe subscriptions as recorded by Fivetran, with revisions to improve historical accuracy.

  To get the historical state at a particular point in time use a condition like the following:
    valid_from <= {timestamp}
    AND valid_to > {timestamp}

  This table's schema closely mirrors Stripe's subscriptions API (https://stripe.com/docs/api/subscriptions/object).
  Fields which Fivetran doesn't sync and fields we've specifically chosen not to include (e.g. PII) have been omitted.
  In particular, all address fields except country have been omitted because Firefox Account user IDs are present and this is in a Mozilla-confidential dataset.

  Some caveats:
    * We only have partial data for Stripe subscriptions prior to March 2023 due to a data loss incident (DENG-754).
owners:
- srose@mozilla.com
labels:
  owner1: srose
workgroup_access:
- role: roles/bigquery.dataViewer
  members:
  - workgroup:mozilla-confidential/data-viewers
references:
  view.sql:
  - moz-fx-data-shared-prod.subscription_platform_derived.stripe_subscriptions_history_v1
