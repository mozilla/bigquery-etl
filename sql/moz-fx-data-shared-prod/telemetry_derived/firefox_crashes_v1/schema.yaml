fields:
- mode: NULLABLE
  name: additional_properties
  type: STRING
  description: A JSON string containing any payload properties not present in the
    schema
- mode: NULLABLE
  name: client_info
  type: RECORD
  fields:
  - name: android_sdk_version
    type: STRING
    description: The optional Android specific SDK version of the software running
      on this hardware device.
  - name: app_build
    type: STRING
    description: The build identifier generated by the CI system (e.g. "1234/A").
      For language bindings that provide automatic detection for this value, (e.g.
      Android/Kotlin), in the unlikely event that the build identifier can not be
      retrieved from the OS, it is set to "inaccessible". For other language bindings,
      if the value was not provided through configuration, this metric gets set to
      `Unknown`.
  - name: app_channel
    type: STRING
    description: The channel the application is being distributed on.
  - name: app_display_version
    type: STRING
    description: The user visible version string (e.g. "1.0.3").  In the unlikely
      event that the display version can not be retrieved, it is set to "inaccessible".
  - name: architecture
    type: STRING
    description: The architecture of the device, (e.g. "arm", "x86").
  - name: build_date
    type: STRING
    description: The date & time the application was built
  - name: client_id
    type: STRING
    description: A UUID uniquely identifying the client.
  - name: device_manufacturer
    type: STRING
    description: The manufacturer of the device the application is running on. Not
      set if the device manufacturer can't be determined (e.g. on Desktop).
  - name: device_model
    type: STRING
    description: The model of the device the application is running on. On Android,
      this is Build.MODEL, the user-visible marketing name, like "Pixel 2 XL". Not
      set if the device model can't be determined (e.g. on Desktop).
  - name: first_run_date
    type: STRING
    description: The date of the first run of the application.
  - name: locale
    type: STRING
    description: The locale of the application during initialization (e.g. "es-ES").
      If the locale can't be determined on the system, the value is ["und"](https://unicode.org/reports/tr35/#Unknown_or_Invalid_Identifiers),
      to indicate "undetermined".
  - name: os
    type: STRING
    description: 'The name of the operating system. Possible values: Android, iOS,
      Linux, Darwin, Windows, FreeBSD, NetBSD, OpenBSD, Solaris, unknown'
  - name: os_version
    type: STRING
    description: The user-visible version of the operating system (e.g. "1.2.3").
      If the version detection fails, this metric gets set to `Unknown`.
  - name: telemetry_sdk_build
    type: STRING
    description: The version of the Glean SDK
  - name: windows_build_number
    type: INTEGER
    description: The optional Windows build number, reported by Windows (e.g. 22000)
      and not set for other platforms
  - name: session_count
    type: INTEGER
    description: An optional running counter of the number of sessions for a client.
  - name: session_id
    type: STRING
    description: An optional UUID uniquely identifying the client's current session.
  - name: attribution
    type: RECORD
    fields:
    - name: campaign
      type: STRING
      description: The attribution campaign (e.g. 'mozilla-org').
    - name: content
      type: STRING
      description: The attribution content (e.g. 'firefoxview').
    - name: medium
      type: STRING
      description: The attribution medium (e.g. 'organic' for a search engine).
    - name: source
      type: STRING
      description: The attribution source (e.g. 'google-play').
    - name: term
      type: STRING
      description: The attribution term (e.g. 'browser with developer tools for android').
    - name: ext
      type: JSON
  - name: distribution
    type: RECORD
    fields:
    - name: name
      type: STRING
      description: The distribution name (e.g. 'MozillaOnline').
    - name: ext
      type: JSON
- mode: NULLABLE
  name: document_id
  type: STRING
  description: The document ID specified in the URI when the client sent this message
- name: events
  type: RECORD
  mode: REPEATED
  fields:
  - name: category
    type: STRING
  - name: extra
    type: RECORD
    mode: REPEATED
    fields:
    - name: key
      type: STRING
    - name: value
      type: STRING
  - name: name
    type: STRING
  - name: timestamp
    type: INTEGER
- mode: NULLABLE
  name: metadata
  type: RECORD
  fields:
  - name: geo
    type: RECORD
    fields:
    - name: city
      type: STRING
    - name: country
      type: STRING
      description: An ISO 3166-1 alpha-2 country code
    - name: db_version
      type: STRING
      description: The specific geo database version used for this lookup
    - name: subdivision1
      type: STRING
      description: First major country subdivision, typically a state, province, or
        county
    - name: subdivision2
      type: STRING
      description: Second major country subdivision; not applicable for most countries
    description: Results of a geographic lookup based on the client's IP address
  - name: header
    type: RECORD
    fields:
    - name: date
      type: STRING
      description: Date HTTP header
    - name: dnt
      type: STRING
      description: DNT (Do Not Track) HTTP header
    - name: x_debug_id
      type: STRING
      description: X-Debug-Id HTTP header
    - name: x_foxsec_ip_reputation
      type: STRING
      description: X-Foxsec-IP-Reputation header
    - name: x_lb_tags
      type: STRING
      description: X-LB-Tags HTTP header
    - name: x_pingsender_version
      type: STRING
      description: X-PingSender-Version HTTP header
    - name: x_source_tags
      type: STRING
      description: X-Source-Tags HTTP header
    - name: x_telemetry_agent
      type: STRING
      description: X-Telemetry-Agent HTTP header
    - name: parsed_date
      type: TIMESTAMP
    - name: parsed_x_source_tags
      type: STRING
      mode: REPEATED
    - name: parsed_x_lb_tags
      type: RECORD
      fields:
      - name: tls_version
        type: STRING
      - name: tls_cipher_hex
        type: STRING
    description: Headers included in the client's HTTP request
  - name: isp
    type: RECORD
    fields:
    - name: db_version
      type: STRING
      description: The specific geo ISP database version used for this lookup
    - name: name
      type: STRING
      description: The name of the ISP associated with the client's IP address
    - name: organization
      type: STRING
      description: The name of a specific business entity associated with the client's
        IP address when available; otherwise the ISP name
    description: Results of ISP lookup based on the client's IP address
  - name: user_agent
    type: RECORD
    fields:
    - name: browser
      type: STRING
    - name: os
      type: STRING
    - name: version
      type: STRING
    description: Parsed components of the client's user agent string
- mode: NULLABLE
  name: metrics
  type: RECORD
  fields:
  - name: labeled_counter
    type: RECORD
    fields:
    - name: glean_error_invalid_label
      type: RECORD
      mode: REPEATED
      fields:
      - name: key
        type: STRING
      - name: value
        type: INTEGER
      description: 'Counts the number of times a metric was set with an invalid label.

        The labels are the `category.name` identifier of the metric.

        '
    - name: glean_error_invalid_overflow
      type: RECORD
      mode: REPEATED
      fields:
      - name: key
        type: STRING
      - name: value
        type: INTEGER
      description: 'Counts the number of times a metric was set a value that overflowed.

        The labels are the `category.name` identifier of the metric.

        '
    - name: glean_error_invalid_state
      type: RECORD
      mode: REPEATED
      fields:
      - name: key
        type: STRING
      - name: value
        type: INTEGER
      description: 'Counts the number of times a timing metric was used incorrectly.

        The labels are the `category.name` identifier of the metric.

        '
    - name: glean_error_invalid_value
      type: RECORD
      mode: REPEATED
      fields:
      - name: key
        type: STRING
      - name: value
        type: INTEGER
      description: 'Counts the number of times a metric was set to an invalid value.

        The labels are the `category.name` identifier of the metric.

        '
  - name: boolean
    type: RECORD
    fields:
    - name: crash_startup
      type: BOOLEAN
      description: If set to 1 then this crash occurred during startup.
    - name: crash_is_garbage_collecting
      type: BOOLEAN
      description: If true then the JavaScript garbage collector was running when
        the crash occurred.
    - name: crash_windows_error_reporting
      type: BOOLEAN
      description: Set to 1 if this crash was intercepted via the Windows Error Reporting
        runtime exception module.
    - name: dll_blocklist_init_failed
      type: BOOLEAN
      description: Set to 1 if the DLL blocklist could not be initialized.
    - name: dll_blocklist_user32_loaded_before
      type: BOOLEAN
      description: Set to 1 if user32.dll was loaded before we could install the DLL
        blocklist.
    - name: environment_headless_mode
      type: BOOLEAN
      description: True if the app was invoked in headless mode via `--headless ...`
        or `--backgroundtask ...`, false otherwise.
    - name: crash_dom_fission_enabled
      type: BOOLEAN
      description: Set to 1 when DOM fission is enabled, and subframes are potentially
        loaded in a separate process.
  - name: datetime
    type: RECORD
    fields:
    - name: crash_time
      type: TIMESTAMP
      description: Crash time in seconds since the Epoch.
    - name: raw_crash_time
      type: STRING
  - name: string
    type: RECORD
    fields:
    - name: crash_process_type
      type: STRING
      description: Type of the process that crashed, the possible values are defined
        in GeckoProcessTypes.h.
    - name: glean_client_annotation_experimentation_id
      type: STRING
      description: 'An experimentation identifier derived and provided by the application

        for the purpose of experimentation enrollment.

        '
    - name: crash_app_build
      type: STRING
      description: Application build ID, the format is YYYYMMDDHHMMSS.
    - name: crash_app_channel
      type: STRING
      description: Application release channel (e.g. default, beta, ...)
    - name: crash_app_display_version
      type: STRING
      description: Product version.
    - name: crash_background_task_name
      type: STRING
      description: If the app was invoked in background task mode via `--backgroundtask
        <task name>`, the string "task name".
    - name: crash_font_name
      type: STRING
      description: Set before attempting to load a font to help diagnose crashes during
        loading.
    - name: crash_ipc_channel_error
      type: STRING
      description: Set before a content process crashes because of an IPC channel
        error. Holds a description of the error.
    - name: crash_main_thread_runnable_name
      type: STRING
      description: Name of the currently executing nsIRunnable on the main thread.
    - name: crash_minidump_sha256_hash
      type: STRING
      description: The sha256 hash of the minidump file, if available.
    - name: crash_moz_crash_reason
      type: STRING
      description: Plaintext description of why Firefox crashed, this is usually set
        by assertions and the like.
    - name: crash_profiler_child_shutdown_phase
      type: STRING
      description: When a child process shuts down, this describes if the profiler
        is running, and the point the profiler shutdown sequence has reached.
    - name: crash_remote_type
      type: STRING
      description: Type of the content process, can be set to "web", "file" or "extension".
    - name: crash_shutdown_progress
      type: STRING
      description: Shutdown step at which the browser crashed, can be set to "quit-application",
        "profile-change-teardown", "profile-before-change", "xpcom-will-shutdown"
        or "xpcom-shutdown".
    - name: crash_windows_file_dialog_error_code
      type: STRING
      description: The HRESULT returned from a Win32 system call leading to termination
        of the file-dialog utility process. MozCrashReason is expected to provide
        context for the value.
    - name: windows_package_family_name
      type: STRING
      description: 'If running in a Windows package context, the package family name,
        per https://docs.microsoft.com/en-us/windows/win32/api/appmodel/nf-appmodel-getcurrentpackagefamilyname.

        The package family name is only included when it is likely to have been produced
        by Mozilla: it starts "Mozilla." or "MozillaCorporation.".'
    - name: memory_js_large_allocation_failure
      type: STRING
      description: A large allocation couldn't be satisfied, check the JSOutOfMemory
        description for the possible values of this annotation.
    - name: memory_js_out_of_memory
      type: STRING
      description: A small allocation couldn't be satisfied, the annotation may contain
        the "Reporting", "Reported" or "Recovered" value. The first one means that
        we crashed while responding to the OOM condition (possibly while running a
        memory-pressure observers), the second that we crashed after having tried
        to free some memory, and the last that the GC had managed to free enough memory
        to satisfy the allocation.
    - name: crash_build_id
      type: STRING
      description: Application build ID, the format is YYYYMMDDHHMMSS.
    - name: crash_crash_type
      type: STRING
      description: The type of crash that occurred (Android-only).
    - name: crash_hang
      type: STRING
      description: Set if the crash was the result of a hang, with a value which describes
        the type of hang (e.g. "ui" or "shutdown").
    - name: crash_linux_memory_psi
      type: STRING
      description: 'Memory PSI (Pressure Stall Information) values from /proc/pressure/memory
        as comma-separated list: some_avg10,some_avg60,some_avg300,some_total,full_avg10,full_avg60,full_avg300,full_total'
    - name: crash_minidump_sha_256_hash
      type: STRING
      description: The sha256 hash of the minidump file, if available.
    - name: crash_product_id
      type: STRING
      description: Application UUID (e.g. ec8030f7-c20a-464f-9b0e-13a3a9e97384).
    - name: crash_product_name
      type: STRING
      description: Application name (e.g. Firefox).
    - name: crash_shutdown_reason
      type: STRING
      description: One out of "Unknown", "AppClose", "AppRestart", "OSForceClose",
        "OSSessionEnd" or "OSShutdown".
    - name: crash_application_build_id
      type: STRING
      description: The Android application's build ID.
    - mode: NULLABLE
      name: crash_cause
      type: STRING
      description: 'The cause of the crash. May be one of `os_fault` or `java_exception`.

        '
  - name: timespan
    type: RECORD
    fields:
    - name: crash_uptime
      type: RECORD
      fields:
      - name: time_unit
        type: STRING
      - name: value
        type: INTEGER
      description: 'The application uptime. This is equivalent to the legacy crash
        ping''s `UptimeTS` field.

        '
    - name: environment_uptime
      type: RECORD
      fields:
      - name: time_unit
        type: STRING
      - name: value
        type: INTEGER
      description: Uptime in seconds. This annotation uses a string instead of an
        integer because it has a fractional component.
    - name: crash_last_interaction_duration
      type: RECORD
      fields:
      - name: time_unit
        type: STRING
      - name: value
        type: INTEGER
      description: How long the user had been inactive in seconds if the user was
        inactive at crash.  The value is not set if the user state was active.
    - name: crash_time_since_last_crash
      type: RECORD
      fields:
      - name: time_unit
        type: STRING
      - name: value
        type: INTEGER
      description: Time in seconds since the last crash occurred.
  - name: object
    type: RECORD
    fields:
    - name: crash_async_shutdown_timeout
      type: JSON
      description: This annotation is present if a shutdown blocker was not released
        in time and the browser was crashed instead of waiting for shutdown to finish.
        The condition that caused the hang is contained in the annotation.
    - name: crash_quota_manager_shutdown_timeout
      type: JSON
      description: 'This annotation is present if the quota manager shutdown (resp.
        the shutdown of the quota manager clients) was not finished in time and the
        browser was crashed instead of waiting for the shutdown to finish. The status
        of objects which were blocking completion of the shutdown when reaching the
        timeout is contained in the annotation.

        In the case of IndexedDB, objects are divided into three groups: FactoryOperations,
        LiveDatabases and DatabaseMaintenances.

        In the case of LocalStorage, objects are divided into three groups: PrepareDatastoreOperations,
        Datastores and LiveDatabases.

        In the case of Cache API, objects are in one group only: Managers.

        Each group is reported separately and contains the number of objects in the
        group and the status of individual objects in the group (duplicate entries
        are removed): "GroupName: N (objectStatus1, objectStatus2, ...)" where N is
        the number of objects in the group.

        The status of individual objects is constructed by taking selected object
        properties. Properties which contain'
    - name: crash_stack_traces
      type: JSON
      description: Stack traces extracted from the crash minidump, if available. These
        are sent in pings, however they are extracted and transformed into a different
        format. The field in the extra file is meant only for client use.
    - name: crash_java_exception
      type: JSON
      description: JSON structured Java stack trace, only present on Firefox for Android
        if we encounter an uncaught Java exception.
    - mode: NULLABLE
      name: crash_breadcrumbs
      type: JSON
      description: 'Crash breadcrumb information.

        '
  - name: quantity
    type: RECORD
    fields:
    - name: crash_event_loop_nesting_level
      type: INTEGER
      description: Present only if higher than 0, indicates that we're running in
        a nested event loop and indicates the nesting level.
    - name: crash_gpu_process_launch
      type: INTEGER
      description: Number of times the GPU process was launched.
    - name: memory_available_commit
      type: INTEGER
      description: "Available commit-space in bytes. - Under Windows, computed from\
        \ the PERFORMANCE_INFORMATION structure by substracting\n  the CommitTotal\
        \ field from the CommitLimit field.\n- Under Linux, computed from /proc/meminfo's\
        \ CommitLimit - Committed_AS. Note that\n  the kernel is not guaranteed to\
        \ enforce that CommittedLimit >= Committed_AS. If\n  Committed_AS > CommittedLimit,\
        \ this value is set to 0.\n- Not available on other platforms."
    - name: memory_available_physical
      type: INTEGER
      description: Amount of free physical memory in bytes. - Under Windows, populated
        with the contents of the MEMORYSTATUSEX's structure ullAvailPhys field. -
        Under macOS, populated with vm_statistics64_data_t::free_count. - Under Linux,
        populated with /proc/meminfo's MemFree. - Not available on other platforms.
    - name: memory_available_swap
      type: INTEGER
      description: "Amount of free swap space in bytes. - Under macOS, populated with\
        \ the contents of\n  sysctl \"vm.swapusage\" :: xsu_avail.\n- Under Linux,\
        \ populated with /proc/meminfo's SwapFree. - Not available on other platforms."
    - name: memory_available_virtual
      type: INTEGER
      description: Amount of free virtual memory in bytes - Under Windows, populated
        with the contents of the MEMORYSTATUSEX's structure ullAvailVirtual field.
        - Under Linux, populated with /proc/meminfo's MemAvailable. - Not available
        on other platforms. - For macOS, see AvailableSwapMemory, AvailablePhysicalMemory
        and PurgeablePhysicalMemory.
    - name: memory_low_physical
      type: INTEGER
      description: Number of times the available memory tracker has detected that
        free physical memory is running low. This is a Windows-specific annotation.
    - name: memory_oom_allocation_size
      type: INTEGER
      description: Size of the allocation that caused an out-of-memory condition.
    - name: memory_purgeable_physical
      type: INTEGER
      description: macOS only. Amount of physical memory currently allocated but which
        may be deallocated by the system in case of memory pressure. Populated from
        vm_statistics64_data_t::purgeable_count * vm_page_size.
    - name: memory_system_use_percentage
      type: INTEGER
      description: Windows-only, percentage of physical memory in use. This annotation
        is populated with the contents of the MEMORYSTATUSEX's structure dwMemoryLoad
        field.
    - name: memory_texture
      type: INTEGER
      description: Amount of memory in bytes consumed by textures.
    - name: memory_total_page_file
      type: INTEGER
      description: "Maximum amount of memory that can be committed without extending\
        \ the swap/page file. - Under Windows, populated with the contents of the\
        \ PERFORMANCE_INFORMATION's\n  structure CommitLimit field.\n- Under Linux,\
        \ populated with /proc/meminfo MemTotal + SwapTotal. The swap file\n  typically\
        \ cannot be extended, so that's a hard limit.\n- Not available on other systems."
    - name: memory_total_physical
      type: INTEGER
      description: Amount of physical memory in bytes. - Under Windows, populated
        with the contents of the MEMORYSTATUSEX's structure ullTotalPhys field. -
        Under macOS, populated with sysctl "hw.memsize". - Under Linux, populated
        with /proc/meminfo's "MemTotal". - Not available on other systems.
    - name: memory_total_virtual
      type: INTEGER
      description: "Size of the virtual address space. - Under Windows, populated\
        \ with the contents of the MEMORYSTATUSEX's structure\n  ullTotalVirtual field.\n\
        - Not available on other platforms."
  - name: string_list
    type: RECORD
    fields:
    - name: dll_blocklist_list
      type: STRING
      mode: REPEATED
    - name: environment_experimental_features
      type: STRING
      mode: REPEATED
    - name: crash_utility_actors_name
      type: STRING
      mode: REPEATED
    - name: environment_nimbus_enrollments
      type: STRING
      mode: REPEATED
    - name: glean_ping_uploader_capabilities
      type: STRING
      mode: REPEATED
- mode: NULLABLE
  name: normalized_app_name
  type: STRING
  description: Set to "Other" if this message contained an unrecognized app name
- mode: NULLABLE
  name: normalized_channel
  type: STRING
  description: Set to "Other" if this message contained an unrecognized channel name
- mode: NULLABLE
  name: normalized_country_code
  type: STRING
  description: An ISO 3166-1 alpha-2 country code
- mode: NULLABLE
  name: normalized_os
  type: STRING
  description: Set to "Other" if this message contained an unrecognized OS name
- mode: NULLABLE
  name: normalized_os_version
  type: STRING
- mode: NULLABLE
  name: ping_info
  type: RECORD
  fields:
  - name: end_time
    type: STRING
  - name: experiments
    type: RECORD
    mode: REPEATED
    fields:
    - name: key
      type: STRING
    - name: value
      type: RECORD
      fields:
      - name: branch
        type: STRING
      - name: extra
        type: RECORD
        fields:
        - name: type
          type: STRING
        - name: enrollment_id
          type: STRING
  - name: ping_type
    type: STRING
  - name: reason
    type: STRING
  - name: seq
    type: INTEGER
  - name: start_time
    type: STRING
  - name: parsed_start_time
    type: TIMESTAMP
  - name: parsed_end_time
    type: TIMESTAMP
- mode: NULLABLE
  name: sample_id
  type: INTEGER
  description: Hashed version of client_id (if present) useful for partitioning; ranges
    from 0 to 99
- mode: NULLABLE
  name: submission_timestamp
  type: TIMESTAMP
  description: Time when the ingestion edge server accepted this message
- mode: NULLABLE
  name: app_version_major
  type: NUMERIC
- mode: NULLABLE
  name: app_version_minor
  type: NUMERIC
- mode: NULLABLE
  name: app_version_patch
  type: NUMERIC
- mode: NULLABLE
  name: is_bot_generated
  type: BOOLEAN
- mode: NULLABLE
  name: normalized_app_id
  type: STRING
  description: App ID of the channel data was received from
