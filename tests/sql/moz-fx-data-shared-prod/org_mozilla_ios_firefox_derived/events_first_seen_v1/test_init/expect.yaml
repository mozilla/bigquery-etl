---
# Test 1: TOU with surface = "bottom_sheet"
- first_submission_timestamp: 2025-10-29T10:00:00+00:00
  client_id: client1-tou-bottom-sheet
  event: "terms_of_use#accepted"
  event_category: "terms_of_use"
  event_name: "accepted"
  criteria: "tou_accept"
  profile_group_id: "client1-tou-profile"
  sample_id: 0
  first_event_timestamp: 2025-10-29T10:00:00+00:00
  event_extra: {surface: "bottom_sheet", version: "1.0"}
  normalized_channel: "release"
  normalized_country_code: "US"
  normalized_os: "iOS"
  normalized_os_version: "17.0"

# Test 2-4: Excluded (wrong surface, no surface, null surface) - NOT IN OUTPUT

# Test 5: Onboarding (no surface requirement)
- first_submission_timestamp: 2025-10-29T11:00:00+00:00
  client_id: client5-onboarding
  event: "onboarding#terms_of_service_accepted"
  event_category: "onboarding"
  event_name: "terms_of_service_accepted"
  criteria: "tou_accept"
  profile_group_id: "client5-onboarding-profile"
  sample_id: 0
  first_event_timestamp: 2025-10-29T11:00:00+00:00
  event_extra: {screen: "welcome"}
  normalized_channel: "beta"
  normalized_country_code: "CA"
  normalized_os: "iOS"
  normalized_os_version: "17.1"

# Test 6: Multiple events - earliest submission (07:00)
- first_submission_timestamp: 2025-10-29T07:00:00+00:00
  client_id: client6-multiple
  event: "terms_of_use#accepted"
  event_category: "terms_of_use"
  event_name: "accepted"
  criteria: "tou_accept"
  profile_group_id: "client6-profile-2"
  sample_id: 1
  first_event_timestamp: 2025-10-29T09:00:00+00:00
  event_extra: {surface: "bottom_sheet", attempt: 2}
  normalized_channel: "beta"
  normalized_country_code: "FR"
  normalized_os: "iOS"
  normalized_os_version: "17.0"

# Test 7: Same submission, earliest event_timestamp (09:00)
- first_submission_timestamp: 2025-10-29T10:00:00+00:00
  client_id: client7-same-submission
  event: "terms_of_use#accepted"
  event_category: "terms_of_use"
  event_name: "accepted"
  criteria: "tou_accept"
  profile_group_id: "client7-profile-1"
  sample_id: 0
  first_event_timestamp: 2025-10-29T09:00:00+00:00
  event_extra: {surface: "bottom_sheet", order: 1}
  normalized_channel: "release"
  normalized_country_code: "US"
  normalized_os: "iOS"
  normalized_os_version: "17.0"

# Test 8: NULL event_timestamp - picks the one with timestamp
- first_submission_timestamp: 2025-10-29T10:00:00+00:00
  client_id: client8-null-event-timestamp
  event: "terms_of_use#accepted"
  event_category: "terms_of_use"
  event_name: "accepted"
  criteria: "tou_accept"
  profile_group_id: "client8-profile-1"
  sample_id: 0
  first_event_timestamp: 2025-10-29T09:00:00+00:00
  event_extra: {surface: "bottom_sheet", has_timestamp: true}
  normalized_channel: "release"
  normalized_country_code: "US"
  normalized_os: "iOS"
  normalized_os_version: "17.0"

# Test 9: Different events - two separate rows
- first_submission_timestamp: 2025-10-29T10:00:00+00:00
  client_id: client9-diff-events
  event: "terms_of_use#accepted"
  event_category: "terms_of_use"
  event_name: "accepted"
  criteria: "tou_accept"
  profile_group_id: "client9-profile"
  sample_id: 0
  first_event_timestamp: 2025-10-29T10:00:00+00:00
  event_extra: {surface: "bottom_sheet", type: "tou"}
  normalized_channel: "release"
  normalized_country_code: "US"
  normalized_os: "iOS"
  normalized_os_version: "17.0"
- first_submission_timestamp: 2025-10-29T11:00:00+00:00
  client_id: client9-diff-events
  event: "onboarding#terms_of_service_accepted"
  event_category: "onboarding"
  event_name: "terms_of_service_accepted"
  criteria: "tou_accept"
  profile_group_id: "client9-profile"
  sample_id: 0
  first_event_timestamp: 2025-10-29T11:00:00+00:00
  event_extra: {type: "onboarding"}
  normalized_channel: "release"
  normalized_country_code: "US"
  normalized_os: "iOS"
  normalized_os_version: "17.0"

# Test 10-11: Excluded (wrong category, wrong event name) - NOT IN OUTPUT

# Test 12-13: Sample boundaries
- first_submission_timestamp: 2025-10-29T10:00:00+00:00
  client_id: client12-sample-min
  event: "terms_of_use#accepted"
  event_category: "terms_of_use"
  event_name: "accepted"
  criteria: "tou_accept"
  profile_group_id: "client12-profile"
  sample_id: 0
  first_event_timestamp: 2025-10-29T10:00:00+00:00
  event_extra: {surface: "bottom_sheet"}
  normalized_channel: "release"
  normalized_country_code: "US"
  normalized_os: "iOS"
  normalized_os_version: "17.0"
- first_submission_timestamp: 2025-10-29T10:00:00+00:00
  client_id: client13-sample-max
  event: "terms_of_use#accepted"
  event_category: "terms_of_use"
  event_name: "accepted"
  criteria: "tou_accept"
  profile_group_id: "client13-profile"
  sample_id: 3
  first_event_timestamp: 2025-10-29T10:00:00+00:00
  event_extra: {surface: "bottom_sheet"}
  normalized_channel: "release"
  normalized_country_code: "US"
  normalized_os: "iOS"
  normalized_os_version: "17.0"

# Test 14: client14-sample-excluded - NOT IN OUTPUT (sample_id >= 4)
# Test 15: client15-before-cutoff - NOT IN OUTPUT (date < 2023-01-01)

# Test 16: On cutoff date
- first_submission_timestamp: 2023-01-01T00:00:00+00:00
  client_id: client16-on-cutoff
  event: "terms_of_use#accepted"
  event_category: "terms_of_use"
  event_name: "accepted"
  criteria: "tou_accept"
  profile_group_id: "client16-profile"
  sample_id: 0
  first_event_timestamp: 2023-01-01T00:00:00+00:00
  event_extra: {surface: "bottom_sheet"}
  normalized_channel: "release"
  normalized_country_code: "US"
  normalized_os: "iOS"
  normalized_os_version: "17.0"

# Test 17: All NULLs (but has surface = "bottom_sheet")
- first_submission_timestamp: 2025-10-29T10:00:00+00:00
  client_id: client17-nulls
  event: "terms_of_use#accepted"
  event_category: "terms_of_use"
  event_name: "accepted"
  criteria: "tou_accept"
  profile_group_id: "client17-profile"
  sample_id: 0
  event_extra: {surface: "bottom_sheet"}


# Test 18: client18-null-extra - NOT IN OUTPUT (event_extra is null, can't check surface)

# Test 19: Onboarding with surface (surface not checked for onboarding)
- first_submission_timestamp: 2025-10-29T10:00:00+00:00
  client_id: client19-onboarding-surface
  event: "onboarding#terms_of_service_accepted"
  event_category: "onboarding"
  event_name: "terms_of_service_accepted"
  criteria: "tou_accept"
  profile_group_id: "client19-profile"
  sample_id: 0
  first_event_timestamp: 2025-10-29T10:00:00+00:00
  event_extra: {surface: "modal", screen: "welcome"}
  normalized_channel: "release"
  normalized_country_code: "US"
  normalized_os: "iOS"
  normalized_os_version: "17.0"
