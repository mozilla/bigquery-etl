friendly_name: Stripe customers history
description: |-
  History of changes to Stripe customers as recorded by Fivetran, with revisions to improve historical accuracy.

  To get the historical state at a particular point in time use a condition like the following:
    valid_from <= {timestamp}
    AND valid_to > {timestamp}

  This table's schema closely mirrors Stripe's customers API (https://stripe.com/docs/api/customers/object).
  Fields which Fivetran doesn't sync and fields we've specifically chosen not to include (e.g. PII) have been omitted.
  In particular, all address fields except country have been omitted because Firefox Account user IDs are present and this is in a Mozilla-confidential dataset.
owners:
- srose@mozilla.com
labels:
  schedule: hourly
  dag: bqetl_subplat_hourly
  owner1: srose
scheduling:
  dag_name: bqetl_subplat_hourly
  date_partition_parameter: null
bigquery:
  time_partitioning: null
  range_partitioning: null
  clustering:
    fields:
    - valid_to
    - valid_from
workgroup_access:
- role: roles/bigquery.dataViewer
  members:
  - workgroup:mozilla-confidential
references:
  query.sql:
  - moz-fx-data-shared-prod.subscription_platform_derived.stripe_customers_revised_changelog_v1
monitoring:
  enabled: true
  collection: null
  partition_column: null
  partition_column_set: false
  freshness: null
  volume: null
require_column_descriptions: true
