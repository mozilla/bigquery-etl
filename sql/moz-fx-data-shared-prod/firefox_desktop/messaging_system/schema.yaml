fields:
- description: A JSON string containing any payload properties not present in the
    schema
  mode: NULLABLE
  name: additional_properties
  type: STRING
- fields:
  - description: The optional Android specific SDK version of the software running
      on this hardware device.
    mode: NULLABLE
    name: android_sdk_version
    type: STRING
  - description: The build identifier generated by the CI system (e.g. "1234/A").
      For language bindings that provide automatic detection for this value, (e.g.
      Android/Kotlin), in the unlikely event that the build identifier can not be
      retrieved from the OS, it is set to "inaccessible". For other language bindings,
      if the value was not provided through configuration, this metric gets set to
      `Unknown`.
    mode: NULLABLE
    name: app_build
    type: STRING
  - description: The channel the application is being distributed on.
    mode: NULLABLE
    name: app_channel
    type: STRING
  - description: The user visible version string (e.g. "1.0.3").  In the unlikely
      event that the display version can not be retrieved, it is set to "inaccessible".
    mode: NULLABLE
    name: app_display_version
    type: STRING
  - description: The architecture of the device, (e.g. "arm", "x86").
    mode: NULLABLE
    name: architecture
    type: STRING
  - description: The date & time the application was built
    mode: NULLABLE
    name: build_date
    type: STRING
  - description: A UUID uniquely identifying the client.
    mode: NULLABLE
    name: client_id
    type: STRING
  - description: The manufacturer of the device the application is running on. Not
      set if the device manufacturer can't be determined (e.g. on Desktop).
    mode: NULLABLE
    name: device_manufacturer
    type: STRING
  - description: The model of the device the application is running on. On Android,
      this is Build.MODEL, the user-visible marketing name, like "Pixel 2 XL". Not
      set if the device model can't be determined (e.g. on Desktop).
    mode: NULLABLE
    name: device_model
    type: STRING
  - description: The date of the first run of the application.
    mode: NULLABLE
    name: first_run_date
    type: STRING
  - description: The locale of the application during initialization (e.g. "es-ES").
      If the locale can't be determined on the system, the value is ["und"](https://unicode.org/reports/tr35/#Unknown_or_Invalid_Identifiers),
      to indicate "undetermined".
    mode: NULLABLE
    name: locale
    type: STRING
  - description: 'The name of the operating system. Possible values: Android, iOS,
      Linux, Darwin, Windows, FreeBSD, NetBSD, OpenBSD, Solaris, unknown'
    mode: NULLABLE
    name: os
    type: STRING
  - description: The user-visible version of the operating system (e.g. "1.2.3").
      If the version detection fails, this metric gets set to `Unknown`.
    mode: NULLABLE
    name: os_version
    type: STRING
  - description: The version of the Glean SDK
    mode: NULLABLE
    name: telemetry_sdk_build
    type: STRING
  - description: The optional Windows build number, reported by Windows (e.g. 22000)
      and not set for other platforms
    mode: NULLABLE
    name: windows_build_number
    type: INTEGER
  mode: NULLABLE
  name: client_info
  type: RECORD
- description: The document ID specified in the URI when the client sent this message
  mode: NULLABLE
  name: document_id
  type: STRING
- fields:
  - mode: NULLABLE
    name: category
    type: STRING
  - fields:
    - mode: NULLABLE
      name: key
      type: STRING
    - mode: NULLABLE
      name: value
      type: STRING
    mode: REPEATED
    name: extra
    type: RECORD
  - mode: NULLABLE
    name: name
    type: STRING
  - mode: NULLABLE
    name: timestamp
    type: INTEGER
  mode: REPEATED
  name: events
  type: RECORD
- fields:
  - description: Results of a geographic lookup based on the client's IP address
    fields:
    - mode: NULLABLE
      name: city
      type: STRING
    - description: An ISO 3166-1 alpha-2 country code
      mode: NULLABLE
      name: country
      type: STRING
    - description: The specific geo database version used for this lookup
      mode: NULLABLE
      name: db_version
      type: STRING
    - description: First major country subdivision, typically a state, province, or
        county
      mode: NULLABLE
      name: subdivision1
      type: STRING
    - description: Second major country subdivision; not applicable for most countries
      mode: NULLABLE
      name: subdivision2
      type: STRING
    mode: NULLABLE
    name: geo
    type: RECORD
  - description: Headers included in the client's HTTP request
    fields:
    - description: Date HTTP header
      mode: NULLABLE
      name: date
      type: STRING
    - description: DNT (Do Not Track) HTTP header
      mode: NULLABLE
      name: dnt
      type: STRING
    - description: X-Debug-Id HTTP header
      mode: NULLABLE
      name: x_debug_id
      type: STRING
    - description: X-Foxsec-IP-Reputation header
      mode: NULLABLE
      name: x_foxsec_ip_reputation
      type: STRING
    - description: X-LB-Tags HTTP header
      mode: NULLABLE
      name: x_lb_tags
      type: STRING
    - description: X-PingSender-Version HTTP header
      mode: NULLABLE
      name: x_pingsender_version
      type: STRING
    - description: X-Source-Tags HTTP header
      mode: NULLABLE
      name: x_source_tags
      type: STRING
    - description: X-Telemetry-Agent HTTP header
      mode: NULLABLE
      name: x_telemetry_agent
      type: STRING
    - mode: NULLABLE
      name: parsed_date
      type: TIMESTAMP
    - mode: REPEATED
      name: parsed_x_source_tags
      type: STRING
    - fields:
      - mode: NULLABLE
        name: tls_version
        type: STRING
      - mode: NULLABLE
        name: tls_cipher_hex
        type: STRING
      mode: NULLABLE
      name: parsed_x_lb_tags
      type: RECORD
    mode: NULLABLE
    name: header
    type: RECORD
  - description: Results of ISP lookup based on the client's IP address
    fields:
    - description: The specific geo ISP database version used for this lookup
      mode: NULLABLE
      name: db_version
      type: STRING
    - description: The name of the ISP associated with the client's IP address
      mode: NULLABLE
      name: name
      type: STRING
    - description: The name of a specific business entity associated with the client's
        IP address when available; otherwise the ISP name
      mode: NULLABLE
      name: organization
      type: STRING
    mode: NULLABLE
    name: isp
    type: RECORD
  - description: Parsed components of the client's user agent string
    fields:
    - mode: NULLABLE
      name: browser
      type: STRING
    - mode: NULLABLE
      name: os
      type: STRING
    - mode: NULLABLE
      name: version
      type: STRING
    mode: NULLABLE
    name: user_agent
    type: RECORD
  mode: NULLABLE
  name: metadata
  type: RECORD
- fields:
  - fields:
    - description: 'How often we failed to parse event_context as JSON.

        '
      mode: NULLABLE
      name: messaging_system_event_context_parse_error
      type: INTEGER
    - description: 'The sum of all unknown keys counted.

        Useful for testing.

        Can be removed after bug 1600008 is resolved.

        '
      mode: NULLABLE
      name: messaging_system_unknown_key_count
      type: INTEGER
    mode: NULLABLE
    name: counter
    type: RECORD
  - fields:
    - description: 'Counts the number of times a metric was set with an invalid label.

        The labels are the `category.name` identifier of the metric.

        '
      fields:
      - mode: NULLABLE
        name: key
        type: STRING
      - mode: NULLABLE
        name: value
        type: INTEGER
      mode: REPEATED
      name: glean_error_invalid_label
      type: RECORD
    - description: 'Counts the number of times a metric was set a value that overflowed.

        The labels are the `category.name` identifier of the metric.

        '
      fields:
      - mode: NULLABLE
        name: key
        type: STRING
      - mode: NULLABLE
        name: value
        type: INTEGER
      mode: REPEATED
      name: glean_error_invalid_overflow
      type: RECORD
    - description: 'Counts the number of times a timing metric was used incorrectly.

        The labels are the `category.name` identifier of the metric.

        '
      fields:
      - mode: NULLABLE
        name: key
        type: STRING
      - mode: NULLABLE
        name: value
        type: INTEGER
      mode: REPEATED
      name: glean_error_invalid_state
      type: RECORD
    - description: 'Counts the number of times a metric was set to an invalid value.

        The labels are the `category.name` identifier of the metric.

        '
      fields:
      - mode: NULLABLE
        name: key
        type: STRING
      - mode: NULLABLE
        name: value
        type: INTEGER
      mode: REPEATED
      name: glean_error_invalid_value
      type: RECORD
    - description: 'Attribution keys supplied to the messaging system for which

        we did not have a corresponding metric, and the count of how

        often that happened.

        Either add this key to a list of known attribution keys in

        `AboutWelcomeTelemetry` to suppress or define an appropriate metric in

        `browser/components/newtab/metrics.yaml` to collect.

        '
      fields:
      - mode: NULLABLE
        name: key
        type: STRING
      - mode: NULLABLE
        name: value
        type: INTEGER
      mode: REPEATED
      name: messaging_system_attribution_unknown_keys
      type: RECORD
    - description: 'Ping keys supplied to the messaging system for which

        we did not have a corresponding metric mapped to how often they attempted

        to be recorded.

        You may have forgotten to define an appropriate metric in

        `browser/components/newtab/metrics.yaml`.

        '
      fields:
      - mode: NULLABLE
        name: key
        type: STRING
      - mode: NULLABLE
        name: value
        type: INTEGER
      mode: REPEATED
      name: messaging_system_unknown_keys
      type: RECORD
    - description: 'We received a ping with non-scalar data on a field of this name.

        If this is existing pre-PingCentre-replacement data, you may need to

        augment the logic in

        `AboutWelcome.submitGleanPingForPing` like the other `handledKeys`.

        If this is for new, post-PingCentre-replacement data, you should

        probably prefer a flat structure.

        If you''re unsure, please ask in

        [the #glean channel](https://chat.mozilla.org/#/room/#glean:mozilla.org).

        '
      fields:
      - mode: NULLABLE
        name: key
        type: STRING
      - mode: NULLABLE
        name: value
        type: INTEGER
      mode: REPEATED
      name: messaging_system_invalid_nested_data
      type: RECORD
    mode: NULLABLE
    name: labeled_counter
    type: RECORD
  - fields:
    - description: 'What type of action resulted in the event. One of "IMPRESSION"
        or "DISMISS".

        '
      mode: NULLABLE
      name: messaging_system_action
      type: STRING
    - description: 'Used to hold the system addon''s version, now is almost certainly
        an echo of the app''s build id.

        '
      mode: NULLABLE
      name: messaging_system_addon_version
      type: STRING
    - description: 'Attribution''s campaign, possibly derived from the utm parameter
        of the

        same name.

        '
      mode: NULLABLE
      name: messaging_system_attribution_campaign
      type: STRING
    - description: 'Attribution''s content, possibly derived from the utm parameter
        of the

        same name.

        '
      mode: NULLABLE
      name: messaging_system_attribution_content
      type: STRING
    - description: 'Mozilla-specific download "source" name. Could be something like

        "mozillaci" to identify that the installer came from

        `{archive|ftp}.mozilla.org`.

        '
      mode: NULLABLE
      name: messaging_system_attribution_dlsource
      type: STRING
    - description: 'String representation of the dltoken identifying the particular

        installer used to install this Firefox.

        Likely a UUID, if present.

        '
      mode: NULLABLE
      name: messaging_system_attribution_dltoken
      type: STRING
    - description: 'Attribution''s experiment key.

        '
      mode: NULLABLE
      name: messaging_system_attribution_experiment
      type: STRING
    - description: 'Attribution''s medium, possibly derived from the utm parameter
        of the same

        name.

        '
      mode: NULLABLE
      name: messaging_system_attribution_medium
      type: STRING
    - description: 'Either the string "true" or the string "false" to indicate whether
        the

        attributed install came from the Microsoft store and, if so, whether the

        user was signed in at the time.

        '
      mode: NULLABLE
      name: messaging_system_attribution_msstoresignedin
      type: STRING
    - description: 'Attribution''s source, possibly derived from the utm parameter
        of the same

        name.

        '
      mode: NULLABLE
      name: messaging_system_attribution_source
      type: STRING
    - description: 'Attribution''s ua key.

        '
      mode: NULLABLE
      name: messaging_system_attribution_ua
      type: STRING
    - description: 'Attribution''s variation key.

        '
      mode: NULLABLE
      name: messaging_system_attribution_variation
      type: STRING
    - description: 'A name shared between multiple messages that may individually
        be too targetted. e.g. a message that gets shown on specific websites or a
        message asking about personal information.

        '
      mode: NULLABLE
      name: messaging_system_bucket_id
      type: STRING
    - description: "The type of event. Any user defined string (e.g. \u201Cclick\u201D\
        , \u201Cshare\u201D, \u201Cdelete\u201D, \u201Cmore_items\u201D)\n"
      mode: NULLABLE
      name: messaging_system_event
      type: STRING
    - description: 'The event_context''s `page`. Almost always "about:welcome".

        '
      mode: NULLABLE
      name: messaging_system_event_page
      type: STRING
    - description: 'The event_context''s `reason`. Likely something like

        "welcome-window-closed" or "app-shut-down",.

        '
      mode: NULLABLE
      name: messaging_system_event_reason
      type: STRING
    - description: 'The event_context''s `source`. Likely something like "primary_button".

        '
      mode: NULLABLE
      name: messaging_system_event_source
      type: STRING
    - description: 'The locale as supplied to the messaging system by `Services.locale.appLocaleAsBCP47`.

        '
      mode: NULLABLE
      name: messaging_system_locale
      type: STRING
    - description: "One of [\u201Dabout:newtab\u201D, \u201Cabout:home\u201D, \u201C\
        about:welcome\u201D, \u201Cunknown\u201D (which either means not-applicable\
        \ or is a bug)].\n"
      mode: NULLABLE
      name: messaging_system_page
      type: STRING
    - description: 'Type of event the ping is capturing. e.g. "cfr", "whats-new-panel",
        "onboarding"

        '
      mode: NULLABLE
      name: messaging_system_ping_type
      type: STRING
    - description: 'The source of the interaction described by the other metrics.
        e.g. "frecent_links", "newtab", "CFR"

        '
      mode: NULLABLE
      name: messaging_system_source
      type: STRING
    mode: NULLABLE
    name: string
    type: RECORD
  - fields:
    - description: 'The Contextual Feature Recommender''s action.

        '
      mode: NULLABLE
      name: messaging_system_cfr_action
      type: STRING
    - description: 'The stringified JSON of `event_context`.

        '
      mode: NULLABLE
      name: messaging_system_event_context
      type: STRING
    - description: 'A string identifier of the message in Activity Stream Router.

        '
      mode: NULLABLE
      name: messaging_system_message_id
      type: STRING
    mode: NULLABLE
    name: text2
    type: RECORD
  - fields:
    - description: 'The Legacy Telemetry browser "session id". Identifies a specific
        period from application start to shutdown. See [the "main" ping docs](https://firefox-source-docs.mozilla.org/toolkit/components/telemetry/data/main-ping.html)
        for details.

        '
      mode: NULLABLE
      name: messaging_system_browser_session_id
      type: STRING
    - description: 'The client_id according to Telemetry.

        Might not always have a value due to policy around specific types of

        ping being sent. Value may be the canary client id

        `c0ffeec0-ffee-c0ff-eec0-ffeec0ffeec0`

        in pings near when the data upload pref is disabled (if Telemetry gets

        to go first), or between when a client_id has been removed and when it

        has been regenerated.

        Present only in some circumstances (see

        [bug 1484035]https://bugzilla.mozilla.org/show_bug.cgi?id=1484035)).

        '
      mode: NULLABLE
      name: messaging_system_client_id
      type: STRING
    - description: 'The unique impression identifier for a specific client.

        '
      mode: NULLABLE
      name: messaging_system_impression_id
      type: STRING
    mode: NULLABLE
    name: uuid
    type: RECORD
  mode: NULLABLE
  name: metrics
  type: RECORD
- description: Set to "Other" if this message contained an unrecognized app name
  mode: NULLABLE
  name: normalized_app_name
  type: STRING
- description: Set to "Other" if this message contained an unrecognized channel name
  mode: NULLABLE
  name: normalized_channel
  type: STRING
- description: An ISO 3166-1 alpha-2 country code
  mode: NULLABLE
  name: normalized_country_code
  type: STRING
- description: Set to "Other" if this message contained an unrecognized OS name
  mode: NULLABLE
  name: normalized_os
  type: STRING
- mode: NULLABLE
  name: normalized_os_version
  type: STRING
- fields:
  - mode: NULLABLE
    name: end_time
    type: STRING
  - fields:
    - mode: NULLABLE
      name: key
      type: STRING
    - fields:
      - mode: NULLABLE
        name: branch
        type: STRING
      - fields:
        - mode: NULLABLE
          name: enrollment_id
          type: STRING
        - mode: NULLABLE
          name: type
          type: STRING
        mode: NULLABLE
        name: extra
        type: RECORD
      mode: NULLABLE
      name: value
      type: RECORD
    mode: REPEATED
    name: experiments
    type: RECORD
  - mode: NULLABLE
    name: ping_type
    type: STRING
  - mode: NULLABLE
    name: reason
    type: STRING
  - mode: NULLABLE
    name: seq
    type: INTEGER
  - mode: NULLABLE
    name: start_time
    type: STRING
  - mode: NULLABLE
    name: parsed_start_time
    type: TIMESTAMP
  - mode: NULLABLE
    name: parsed_end_time
    type: TIMESTAMP
  mode: NULLABLE
  name: ping_info
  type: RECORD
- description: Hashed version of client_id (if present) useful for partitioning; ranges
    from 0 to 99
  mode: NULLABLE
  name: sample_id
  type: INTEGER
- description: Time when the ingestion edge server accepted this message
  mode: NULLABLE
  name: submission_timestamp
  type: TIMESTAMP
