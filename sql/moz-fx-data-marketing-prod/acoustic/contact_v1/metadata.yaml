friendly_name: Contact Database (Acoustic data)

description: >
  Import Contacts file exported from Acoustic (CSV data)

  Each partition represents CSV data extracted from Acoustic
  each submission_date represents contacts that were last modified
  on the date corresponding to Airflow's execution date

  Data source: https://developer.goacoustic.com/acoustic-campaign/reference/export-from-a-database
  Jira: https://mozilla-hub.atlassian.net/browse/DENG-17

labels:
  incremental: true

owners:
  - kik@mozilla.com

scheduling:
  dag_name: bqetl_acoustic_contact_export
  date_partition_parameter: submission_date

bigquery:
  time_partitioning:
    type: day
    field: last_modified_date
    require_partition_filter: false
  clustering:
    fields:
      - has_opted_out_of_email
      - double_opt_in
      - email_lang
      - mailing_country

# Generated by bigquery_etl.dependency
references:
  init.sql:
  - moz-fx-data-marketing-prod.acoustic.contact_v1
  query.sql:
  - moz-fx-data-marketing-prod.acoustic.contact_raw_v1
