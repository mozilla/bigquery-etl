fields:
- name: additional_properties
  type: STRING
  mode: NULLABLE
  description: A JSON string containing any payload properties not present in the
    schema
- name: client_info
  type: RECORD
  mode: NULLABLE
  fields:
  - name: android_sdk_version
    type: STRING
    mode: NULLABLE
    description: The optional Android specific SDK version of the software running
      on this hardware device.
  - name: app_build
    type: STRING
    mode: NULLABLE
    description: The build identifier generated by the CI system (e.g. "1234/A").
      For language bindings that provide automatic detection for this value, (e.g.
      Android/Kotlin), in the unlikely event that the build identifier can not be
      retrieved from the OS, it is set to "inaccessible". For other language bindings,
      if the value was not provided through configuration, this metric gets set to
      `Unknown`.
  - name: app_channel
    type: STRING
    mode: NULLABLE
    description: The channel the application is being distributed on.
  - name: app_display_version
    type: STRING
    mode: NULLABLE
    description: The user visible version string (e.g. "1.0.3").  In the unlikely
      event that the display version can not be retrieved, it is set to "inaccessible".
  - name: architecture
    type: STRING
    mode: NULLABLE
    description: The architecture of the device, (e.g. "arm", "x86").
  - name: client_id
    type: STRING
    mode: NULLABLE
    description: A UUID uniquely identifying the client.
  - name: device_manufacturer
    type: STRING
    mode: NULLABLE
    description: The manufacturer of the device the application is running on. Not
      set if the device manufacturer can't be determined (e.g. on Desktop).
  - name: device_model
    type: STRING
    mode: NULLABLE
    description: The model of the device the application is running on. On Android,
      this is Build.MODEL, the user-visible marketing name, like "Pixel 2 XL". Not
      set if the device model can't be determined (e.g. on Desktop).
  - name: first_run_date
    type: STRING
    mode: NULLABLE
    description: The date of the first run of the application.
  - name: locale
    type: STRING
    mode: NULLABLE
    description: The locale of the application during initialization (e.g. "es-ES").
      If the locale can't be determined on the system, the value is ["und"](https://unicode.org/reports/tr35/#Unknown_or_Invalid_Identifiers),
      to indicate "undetermined".
  - name: os
    type: STRING
    mode: NULLABLE
    description: 'The name of the operating system. Possible values: Android, iOS,
      Linux, Darwin, Windows, FreeBSD, NetBSD, OpenBSD, Solaris, unknown'
  - name: os_version
    type: STRING
    mode: NULLABLE
    description: The user-visible version of the operating system (e.g. "1.2.3").
      If the version detection fails, this metric gets set to `Unknown`.
  - name: telemetry_sdk_build
    type: STRING
    mode: NULLABLE
    description: The version of the Glean SDK
  - name: build_date
    type: STRING
    mode: NULLABLE
    description: The date & time the application was built
  - name: windows_build_number
    type: INTEGER
    mode: NULLABLE
    description: The optional Windows build number, reported by Windows (e.g. 22000)
      and not set for other platforms
  - name: session_count
    type: INTEGER
    mode: NULLABLE
    description: An optional running counter of the number of sessions for a client.
  - name: session_id
    type: STRING
    mode: NULLABLE
    description: An optional UUID uniquely identifying the client's current session.
  - name: attribution
    type: RECORD
    mode: NULLABLE
    fields:
    - name: campaign
      type: STRING
      mode: NULLABLE
      description: The attribution campaign (e.g. 'mozilla-org').
    - name: content
      type: STRING
      mode: NULLABLE
      description: The attribution content (e.g. 'firefoxview').
    - name: medium
      type: STRING
      mode: NULLABLE
      description: The attribution medium (e.g. 'organic' for a search engine).
    - name: source
      type: STRING
      mode: NULLABLE
      description: The attribution source (e.g. 'google-play').
    - name: term
      type: STRING
      mode: NULLABLE
      description: The attribution term (e.g. 'browser with developer tools for android').
    - name: ext
      type: JSON
      mode: NULLABLE
  - name: distribution
    type: RECORD
    mode: NULLABLE
    fields:
    - name: name
      type: STRING
      mode: NULLABLE
      description: The distribution name (e.g. 'MozillaOnline').
    - name: ext
      type: JSON
      mode: NULLABLE
- name: document_id
  type: STRING
  mode: NULLABLE
  description: The document ID specified in the URI when the client sent this message
- name: events
  type: RECORD
  mode: REPEATED
  fields:
  - name: category
    type: STRING
    mode: NULLABLE
  - name: extra
    type: RECORD
    mode: REPEATED
    fields:
    - name: key
      type: STRING
      mode: NULLABLE
    - name: value
      type: STRING
      mode: NULLABLE
  - name: name
    type: STRING
    mode: NULLABLE
  - name: timestamp
    type: INTEGER
    mode: NULLABLE
- name: metadata
  type: RECORD
  mode: NULLABLE
  fields:
  - name: geo
    type: RECORD
    mode: NULLABLE
    fields:
    - name: city
      type: STRING
      mode: NULLABLE
    - name: country
      type: STRING
      mode: NULLABLE
      description: An ISO 3166-1 alpha-2 country code
    - name: db_version
      type: STRING
      mode: NULLABLE
      description: The specific geo database version used for this lookup
    - name: subdivision1
      type: STRING
      mode: NULLABLE
      description: First major country subdivision, typically a state, province, or
        county
    - name: subdivision2
      type: STRING
      mode: NULLABLE
      description: Second major country subdivision; not applicable for most countries
    description: Results of a geographic lookup based on the client's IP address
  - name: header
    type: RECORD
    mode: NULLABLE
    fields:
    - name: date
      type: STRING
      mode: NULLABLE
      description: Date HTTP header
    - name: dnt
      type: STRING
      mode: NULLABLE
      description: DNT (Do Not Track) HTTP header
    - name: x_debug_id
      type: STRING
      mode: NULLABLE
      description: X-Debug-Id HTTP header
    - name: x_pingsender_version
      type: STRING
      mode: NULLABLE
      description: X-PingSender-Version HTTP header
    - name: x_source_tags
      type: STRING
      mode: NULLABLE
      description: X-Source-Tags HTTP header
    - name: x_telemetry_agent
      type: STRING
      mode: NULLABLE
      description: X-Telemetry-Agent HTTP header
    - name: x_foxsec_ip_reputation
      type: STRING
      mode: NULLABLE
      description: X-Foxsec-IP-Reputation header
    - name: x_lb_tags
      type: STRING
      mode: NULLABLE
      description: X-LB-Tags HTTP header
    - name: parsed_date
      type: TIMESTAMP
      mode: NULLABLE
    - name: parsed_x_source_tags
      type: STRING
      mode: REPEATED
    - name: parsed_x_lb_tags
      type: RECORD
      mode: NULLABLE
      fields:
      - name: tls_version
        type: STRING
        mode: NULLABLE
      - name: tls_cipher_hex
        type: STRING
        mode: NULLABLE
    description: Headers included in the client's HTTP request
  - name: isp
    type: RECORD
    mode: NULLABLE
    fields:
    - name: db_version
      type: STRING
      mode: NULLABLE
      description: The specific geo ISP database version used for this lookup
    - name: name
      type: STRING
      mode: NULLABLE
      description: The name of the ISP associated with the client's IP address
    - name: organization
      type: STRING
      mode: NULLABLE
      description: The name of a specific business entity associated with the client's
        IP address when available; otherwise the ISP name
    description: Results of ISP lookup based on the client's IP address
  - name: user_agent
    type: RECORD
    mode: NULLABLE
    fields:
    - name: browser
      type: STRING
      mode: NULLABLE
    - name: os
      type: STRING
      mode: NULLABLE
    - name: version
      type: STRING
      mode: NULLABLE
    description: Parsed components of the client's user agent string
- name: metrics
  type: RECORD
  mode: NULLABLE
  fields:
  - name: boolean
    type: RECORD
    mode: NULLABLE
    fields:
    - name: background_update_exit_code_exception
      type: BOOLEAN
      mode: NULLABLE
      description: 'True if the exit code/status of the background update task is
        3, which means an exception was thrown.

        '
    - name: background_update_exit_code_success
      type: BOOLEAN
      mode: NULLABLE
      description: 'True if the exit code/status of the background update task is
        0, which means success.

        '
    - name: update_auto_download
      type: BOOLEAN
      mode: NULLABLE
      description: 'Per-installation preference "app.update.auto": whether to fetch
        and install updates without user intervention.

        '
    - name: update_background_update
      type: BOOLEAN
      mode: NULLABLE
      description: 'Per-installation preference "app.update.background.enabled": whether
        to fetch and install updates in the background when Firefox is not running.

        '
    - name: update_can_usually_apply_updates
      type: BOOLEAN
      mode: NULLABLE
      description: 'Whether or not the Update Service can usually download and install
        updates. See `canUsuallyApplyUpdates` in https://searchfox.org/mozilla-central/source/toolkit/mozapps/update/nsIUpdateService.idl.

        '
    - name: update_can_usually_check_for_updates
      type: BOOLEAN
      mode: NULLABLE
      description: 'Whether or not the Update Service can usually check for updates.
        See `canUsuallyCheckForUpdates` in https://searchfox.org/mozilla-central/source/toolkit/mozapps/update/nsIUpdateService.idl.

        '
    - name: update_can_usually_stage_updates
      type: BOOLEAN
      mode: NULLABLE
      description: 'Whether the Update Service is usually able to stage updates. See
        `canUsuallyStageUpdates` in https://searchfox.org/mozilla-central/source/toolkit/mozapps/update/nsIUpdateService.idl.

        '
    - name: update_can_usually_use_bits
      type: BOOLEAN
      mode: NULLABLE
      description: 'On Windows, whether the Update Service can usually use BITS. See
        `canUsuallyUseBits` in https://searchfox.org/mozilla-central/source/toolkit/mozapps/update/nsIUpdateService.idl.

        '
    - name: update_enabled
      type: BOOLEAN
      mode: NULLABLE
      description: 'True when policies are disabled or when the "DisableAppUpdate"
        is not in effect.

        '
    - name: update_service_enabled
      type: BOOLEAN
      mode: NULLABLE
      description: 'Preference "app.update.service.enabled": whether the Mozilla Maintenance
        Service is enabled.

        '
    - name: background_update_targeting_exception
      type: BOOLEAN
      mode: NULLABLE
      description: 'True if the default profile had a targeting snapshot serialized
        to disk, but an exception was thrown reading it.

        '
    - name: background_update_targeting_exists
      type: BOOLEAN
      mode: NULLABLE
      description: 'True if the default profile had a targeting snapshot serialized
        to disk, and there was no exception thrown reading it.

        '
    - name: background_update_registered_restart_attempted
      type: BOOLEAN
      mode: NULLABLE
      description: 'True if the background update task successfully registered a restart.

        '
    - name: background_update_registered_restart_success
      type: BOOLEAN
      mode: NULLABLE
      description: 'True if the background update task successfully restarted after
        a registered restart.

        '
    - name: background_update_automatic_restart_attempted
      type: BOOLEAN
      mode: NULLABLE
      description: 'True if the background update task successfully attempted an automatic
        restart.

        '
    - name: background_update_automatic_restart_success
      type: BOOLEAN
      mode: NULLABLE
      description: 'True if the background update task successfully restarted after
        an automatic restart.

        '
    - name: update_suppress_prompts
      type: BOOLEAN
      mode: NULLABLE
      description: 'When an update is available and app.update.auto is disabled, a
        popup is opened prompting the user to download and install the update. The
        pref app.update.suppressPrompts causes Firefox Nightly to wait up to 7 days
        before showing the prompt, instead showing a badge and banner in the meantime.
        It also prevents Nightly from showing update restart prompts, instead showing
        a badge and banner immediately. This value is set for the users who set this
        pref to true. This metric was generated to correspond to the Legacy Telemetry
        scalar update.suppress_prompts.

        '
    - name: background_update_throttled
      type: BOOLEAN
      mode: NULLABLE
      description: 'True if this invocation of the background task was throttled and
        did not attempt to actually update.

        '
  - name: labeled_counter
    type: RECORD
    mode: NULLABLE
    fields:
    - name: glean_error_invalid_label
      type: RECORD
      mode: REPEATED
      fields:
      - name: key
        type: STRING
        mode: NULLABLE
      - name: value
        type: INTEGER
        mode: NULLABLE
      description: 'Counts the number of times a metric was set with an invalid label.

        The labels are the `category.name` identifier of the metric.

        '
    - name: glean_error_invalid_overflow
      type: RECORD
      mode: REPEATED
      fields:
      - name: key
        type: STRING
        mode: NULLABLE
      - name: value
        type: INTEGER
        mode: NULLABLE
      description: 'Counts the number of times a metric was set a value that overflowed.

        The labels are the `category.name` identifier of the metric.

        '
    - name: glean_error_invalid_state
      type: RECORD
      mode: REPEATED
      fields:
      - name: key
        type: STRING
        mode: NULLABLE
      - name: value
        type: INTEGER
        mode: NULLABLE
      description: 'Counts the number of times a timing metric was used incorrectly.

        The labels are the `category.name` identifier of the metric.

        '
    - name: glean_error_invalid_value
      type: RECORD
      mode: REPEATED
      fields:
      - name: key
        type: STRING
        mode: NULLABLE
      - name: value
        type: INTEGER
        mode: NULLABLE
      description: 'Counts the number of times a metric was set to an invalid value.

        The labels are the `category.name` identifier of the metric.

        '
    - name: update_skip_startup_update_reason
      type: RECORD
      mode: REPEATED
      fields:
      - name: key
        type: STRING
        mode: NULLABLE
      - name: value
        type: INTEGER
        mode: NULLABLE
      description: 'We usually install pending updates at startup, but there are a
        couple of reasons we might not. This value will be set to "none" if there
        was no reason not to install updates. If the value is "DevToolsLaunching",
        that means that we skipped applying updates because the application startup
        was actually a startup of the Browser Toolbox, not the browser itself. If
        the value is "NotAnUpdatingTask", that means that the browser launch is a
        background task other than the background update task, (which have update
        capabilities disabled). If the value is "OtherInstanceRunning", that means
        that the background update task was launched, but it didn''t install an update
        in order to avoid interfering with other application instances. If the value
        is "FirstStartup", we didn''t install any updates because the browser was
        launched by the installer. If the value is "MultiSessionInstallLockout", there
        are other browser instances running and the Multi Session Install Lockout
        timeout has not expired yet. Note that, for updates to be '
    - name: update_bitshresult
      type: RECORD
      mode: REPEATED
      fields:
      - name: key
        type: STRING
        mode: NULLABLE
      - name: value
        type: INTEGER
        mode: NULLABLE
      description: 'If a BITS download fails on the Windows side (that is to say,
        BITS ecounters an error rather than Firefox failing to interact with BITS),
        it will likely give an hresult error indicating what happened. This probe
        reports those error codes to allow us to see if BITS is commonly failing on
        some systems. This probe is keyed on the type of update download, either "PARTIAL"
        or "COMPLETE". This metric was generated to correspond to the Legacy Telemetry
        scalar update.bitshresult.

        '
    - name: update_move_result
      type: RECORD
      mode: REPEATED
      fields:
      - name: key
        type: STRING
        mode: NULLABLE
      - name: value
        type: INTEGER
        mode: NULLABLE
      description: 'Firefox keeps downloading updates in a different place from updates
        that are ready to install. Once the download completes, the resulting file
        has to be moved from the downloading update directory to the ready update
        directory. This probe counts the results that we get when attempting to perform
        this file move. Valid values for the keys for this probe are stored in the
        MOVE_RESULT_* values in UpdateTelemetry.sys.mjs. This metric was generated
        to correspond to the Legacy Telemetry scalar update.move_result.

        '
  - name: string
    type: RECORD
    mode: NULLABLE
    fields:
    - name: background_update_final_state
      type: STRING
      mode: NULLABLE
      description: 'String description of the final state the update state machine
        reached.

        '
    - name: update_channel
      type: STRING
      mode: NULLABLE
      description: 'The update channel.

        '
    - name: glean_client_annotation_experimentation_id
      type: STRING
      mode: NULLABLE
      description: 'An experimentation identifier derived and provided by the application

        for the purpose of experimentation enrollment.

        '
    - name: update_version_pin
      type: STRING
      mode: NULLABLE
      description: 'The AppUpdatePin Enterprise Policy controls the maximum version
        that the browser can update to. If the policy is set, this probe will report
        the policy''s value. The possible policy values are "X." and "X.Y.", where
        X is the pinned major version and Y is the pinned minor version. This metric
        was generated to correspond to the Legacy Telemetry scalar update.version_pin.

        '
  - name: string_list
    type: RECORD
    mode: NULLABLE
    fields:
    - name: background_update_reasons
      type: STRING
      mode: REPEATED
    - name: background_update_states
      type: STRING
      mode: REPEATED
    - name: glean_ping_uploader_capabilities
      type: STRING
      mode: REPEATED
  - name: uuid
    type: RECORD
    mode: NULLABLE
    fields:
    - name: background_update_client_id
      type: STRING
      mode: NULLABLE
      description: 'The legacy Telemetry client ID of this installation''s default
        profile.

        The default profile is as determined by the Profile Service, namely `nsIToolkitProfileService.defaultProfile`.  The
        majority of users have only one Firefox installation and only one profile,
        so the default profile is their regular browsing profile.

        It is possible for a Firefox installation to not have a default profile, but
        in such cases the background update task will abort before sending any telemetry;
        therefore, the legacy Telemetry client ID should always be present.

        '
  - name: datetime
    type: RECORD
    mode: NULLABLE
    fields:
    - name: background_update_targeting_env_current_date
      type: TIMESTAMP
      mode: NULLABLE
      description: 'The `environment.currentDate` of the default profile''s serialized
        targeting snapshot.

        '
    - name: raw_background_update_targeting_env_current_date
      type: STRING
      mode: NULLABLE
    - name: background_update_targeting_env_profile_age
      type: TIMESTAMP
      mode: NULLABLE
      description: 'The `environment.profileAgeCreated` of the default profile''s
        serialized targeting snapshot.

        '
    - name: raw_background_update_targeting_env_profile_age
      type: STRING
      mode: NULLABLE
  - name: quantity
    type: RECORD
    mode: NULLABLE
    fields:
    - name: background_update_targeting_env_firefox_version
      type: INTEGER
      mode: NULLABLE
      description: 'The `environment.firefoxVersion` of the default profile''s serialized
        targeting snapshot.  At the time of writing, this version is an integer representing
        the Firefox major version, e.g., `109`.

        '
    - name: background_update_targeting_version
      type: INTEGER
      mode: NULLABLE
      description: 'If the default profile had a targeting snapshot serialized to
        disk, the `version` of the snapshot.

        This version number does not have a physical unit: it''s only useful to compare
        between versions.

        '
    - name: background_update_days_since_last_browsed
      type: INTEGER
      mode: NULLABLE
      description: 'The number of days since the default profile was last used for
        browsing, i.e., since `environment.currentDate` of the default profile''s
        serialized targeting snapshot.

        '
  - name: counter
    type: RECORD
    mode: NULLABLE
    fields:
    - name: update_no_window_auto_restarts
      type: INTEGER
      mode: NULLABLE
      description: 'On macOS, all browser windows can be closed without exiting Firefox.
        If there is an update pending in that case, and we can install it silently,
        we restart automatically in order to do so. This probe counts the number of
        times the browser restarts to silently install a pending update. This metric
        was generated to correspond to the Legacy Telemetry scalar update.no_window_auto_restarts.

        '
    - name: background_update_debounced
      type: INTEGER
      mode: NULLABLE
      description: 'The number of debounced background task invocations between this
        invocation and the last invocation that was not debounced.

        '
- name: normalized_app_name
  type: STRING
  mode: NULLABLE
  description: Set to "Other" if this message contained an unrecognized app name
- name: normalized_channel
  type: STRING
  mode: NULLABLE
  description: Set to "Other" if this message contained an unrecognized channel name
- name: normalized_country_code
  type: STRING
  mode: NULLABLE
  description: An ISO 3166-1 alpha-2 country code
- name: normalized_os
  type: STRING
  mode: NULLABLE
  description: Set to "Other" if this message contained an unrecognized OS name
- name: normalized_os_version
  type: STRING
  mode: NULLABLE
- name: ping_info
  type: RECORD
  mode: NULLABLE
  fields:
  - name: end_time
    type: STRING
    mode: NULLABLE
  - name: experiments
    type: RECORD
    mode: REPEATED
    fields:
    - name: key
      type: STRING
      mode: NULLABLE
    - name: value
      type: RECORD
      mode: NULLABLE
      fields:
      - name: branch
        type: STRING
        mode: NULLABLE
      - name: extra
        type: RECORD
        mode: NULLABLE
        fields:
        - name: type
          type: STRING
          mode: NULLABLE
        - name: enrollment_id
          type: STRING
          mode: NULLABLE
  - name: ping_type
    type: STRING
    mode: NULLABLE
  - name: reason
    type: STRING
    mode: NULLABLE
  - name: seq
    type: INTEGER
    mode: NULLABLE
  - name: start_time
    type: STRING
    mode: NULLABLE
  - name: parsed_start_time
    type: TIMESTAMP
    mode: NULLABLE
  - name: parsed_end_time
    type: TIMESTAMP
    mode: NULLABLE
- name: sample_id
  type: INTEGER
  mode: NULLABLE
  description: Hashed version of client_id (if present) useful for partitioning; ranges
    from 0 to 99
- name: submission_timestamp
  type: TIMESTAMP
  mode: NULLABLE
  description: Time when the ingestion edge server accepted this message
- name: app_version_major
  type: NUMERIC
  mode: NULLABLE
- name: app_version_minor
  type: NUMERIC
  mode: NULLABLE
- name: app_version_patch
  type: NUMERIC
  mode: NULLABLE
- name: is_bot_generated
  type: BOOLEAN
  mode: NULLABLE
