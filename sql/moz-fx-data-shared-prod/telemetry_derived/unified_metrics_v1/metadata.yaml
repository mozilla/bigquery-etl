friendly_name: Unified Metrics
description: |-
  Unified view on common browser metrics across all products.

  Note. From Q4/2022 the app name includes the suffix ` Glean`
  to differentiate data collected via Glean from the data
  collected in Legavy Telemetry, until the migration to use only
  Glean is complete.
  For this reason is important to query this table always
  using the view, which retrieves the correct dataset.

  Proposal:
  https://docs.google.com/document/d/1s_9pmDXKjfFpvW31jqnWyaWOE9tmO9_88Jt7inGVGys
owners:
- loines@mozilla.com
labels:
  incremental: true
  dag: bqetl_unified
  owner1: loines
scheduling:
  dag_name: bqetl_unified
bigquery:
  time_partitioning:
    type: day
    field: submission_date
    require_partition_filter: true
    expiration_days: null
  range_partitioning: null
  clustering:
    fields:
    - sample_id
    - normalized_app_name
workgroup_access:
- role: roles/bigquery.dataViewer
  members:
  - workgroup:mozilla-confidential
references:
  checks.sql:
  - ..
  - ..INFORMATION_SCHEMA.PARTITIONS
  query.sql:
  - moz-fx-data-shared-prod.fenix.clients_last_seen_joined
  - moz-fx-data-shared-prod.firefox_ios.clients_last_seen_joined
  - moz-fx-data-shared-prod.focus_android.clients_last_seen_joined
  - moz-fx-data-shared-prod.focus_ios.clients_last_seen_joined
  - moz-fx-data-shared-prod.klar_ios.clients_last_seen_joined
  - moz-fx-data-shared-prod.search_derived.mobile_search_clients_daily_v1
  - moz-fx-data-shared-prod.telemetry.clients_last_seen
  - moz-fx-data-shared-prod.telemetry.core_clients_last_seen
require_column_descriptions: false
