friendly_name: Raw Recipient (Acoustic data)

description: >
  Import Raw Recipient file exported from Acoustic (CSV data).
  This includes metrics around email performance (clicks, opens, etc).

  Each partition represents CSV data that was provided Acoustic
  for the date correponding to Airflow's execution date

  Data source: https://developer.goacoustic.com/acoustic-campaign/reference/rawrecipientdataexport
  Jira: https://mozilla-hub.atlassian.net/browse/DENG-17

labels:
  incremental: true

owners:
  - kignasiak@mozilla.com

scheduling:
  dag_name: bqetl_acoustic_raw_recipient_export
  arguments: ["--submission_date", "{{ ds }}"]
  referenced_tables:
    - [
      'moz-fx-data-bq-fivetran',
      'acoustic_sftp',
      'raw_recipient_export_v1'
    ]
  depends_on:
    - task_id: fivetran_load_completed
      dag_name: fivetran_acoustic_raw_recipient_export
      execution_delta: 1h

bigquery:
  time_partitioning:
    field: submission_date
    type: day
    require_partition_filter: false

# Generated by bigquery_etl.dependency
references:
  query.sql:
  - moz-fx-data-bq-fivetran.acoustic_sftp.raw_recipient_export_v_1
