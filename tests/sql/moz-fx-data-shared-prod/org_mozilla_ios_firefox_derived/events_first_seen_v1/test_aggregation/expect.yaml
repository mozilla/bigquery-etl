---
# Test 1: New TOU with bottom_sheet surface - INCLUDED
- first_submission_timestamp: 2025-10-29T10:00:00+00:00
  client_id: client1-tou-new
  event: "terms_of_use#accepted"
  event_category: "terms_of_use"
  event_name: "accepted"
  criteria: "tou_accept"
  profile_group_id: "client1-tou-profile"
  sample_id: 0
  first_event_timestamp: 2025-10-29T10:00:00+00:00
  event_extra: {surface: "bottom_sheet", version: "1.0"}

# Test 2: New onboarding TOU - INCLUDED
- first_submission_timestamp: 2025-10-29T11:00:00+00:00
  client_id: client2-onboarding-new
  event: "onboarding#terms_of_service_accepted"
  event_category: "onboarding"
  event_name: "terms_of_service_accepted"
  criteria: "tou_accept"
  profile_group_id: "client2-onboarding-profile"
  sample_id: 1
  first_event_timestamp: 2025-10-29T11:00:00+00:00
  event_extra: {screen: "welcome"}

# Test 3: client3-existing - EXCLUDED (already in history)

# Test 4-5: Wrong surface or no surface - EXCLUDED

# Test 6: Multiple events - INCLUDED (aggregated to earliest)
- first_submission_timestamp: 2025-10-29T08:00:00+00:00
  client_id: client6-multiple
  event: "terms_of_use#accepted"
  event_category: "terms_of_use"
  event_name: "accepted"
  criteria: "tou_accept"
  profile_group_id: "client6-profile-1"
  sample_id: 0
  first_event_timestamp: 2025-10-29T08:00:00+00:00
  event_extra: {surface: "bottom_sheet", attempt: 1}

# Test 7: Both TOU types - INCLUDED (2 separate rows)
- first_submission_timestamp: 2025-10-29T10:00:00+00:00
  client_id: client7-both-types
  event: "terms_of_use#accepted"
  event_category: "terms_of_use"
  event_name: "accepted"
  criteria: "tou_accept"
  profile_group_id: "client7-profile"
  sample_id: 0
  first_event_timestamp: 2025-10-29T10:00:00+00:00
  event_extra: {surface: "bottom_sheet", type: "tou"}
- first_submission_timestamp: 2025-10-29T11:00:00+00:00
  client_id: client7-both-types
  event: "onboarding#terms_of_service_accepted"
  event_category: "onboarding"
  event_name: "terms_of_service_accepted"
  criteria: "tou_accept"
  profile_group_id: "client7-profile"
  sample_id: 0
  first_event_timestamp: 2025-10-29T11:00:00+00:00
  event_extra: {type: "onboarding"}

# Test 8: Partial history - only new event INCLUDED
- first_submission_timestamp: 2025-10-29T11:00:00+00:00
  client_id: client8-partial-history
  event: "onboarding#terms_of_service_accepted"
  event_category: "onboarding"
  event_name: "terms_of_service_accepted"
  criteria: "tou_accept"
  profile_group_id: "client8-profile"
  sample_id: 0
  first_event_timestamp: 2025-10-29T11:00:00+00:00
  event_extra: {type: "new"}

# Test 9-13: Various exclusions - NOT IN OUTPUT

# Test 14: NULL fields - INCLUDED
- first_submission_timestamp: 2025-10-29T10:00:00+00:00
  client_id: client14-nulls
  event: "onboarding#terms_of_service_accepted"
  event_category: "onboarding"
  event_name: "terms_of_service_accepted"
  criteria: "tou_accept"
  profile_group_id: "client14-profile"
  sample_id: 0
  event_extra: {screen: "setup"}

# Test 15: client15-null-extra - EXCLUDED (can't check surface for TOU)

# Test 16: Onboarding with surface - INCLUDED (surface not checked)
- first_submission_timestamp: 2025-10-29T10:00:00+00:00
  client_id: client16-onboarding-surfaces
  event: "onboarding#terms_of_service_accepted"
  event_category: "onboarding"
  event_name: "terms_of_service_accepted"
  criteria: "tou_accept"
  profile_group_id: "client16-profile"
  sample_id: 0
  first_event_timestamp: 2025-10-29T10:00:00+00:00
  event_extra: {surface: "modal", screen: "welcome"}

# Test 17: Event ordering - INCLUDED (picks earliest event_timestamp)
- first_submission_timestamp: 2025-10-29T10:00:00+00:00
  client_id: client17-event-ordering
  event: "terms_of_use#accepted"
  event_category: "terms_of_use"
  event_name: "accepted"
  criteria: "tou_accept"
  profile_group_id: "client17-profile-1"
  sample_id: 0
  first_event_timestamp: 2025-10-29T09:00:00+00:00
  event_extra: {surface: "bottom_sheet", order: 1}

# Test 18: NULL timestamp - INCLUDED (picks the one with timestamp)
- first_submission_timestamp: 2025-10-29T10:00:00+00:00
  client_id: client18-null-timestamp
  event: "onboarding#terms_of_service_accepted"
  event_category: "onboarding"
  event_name: "terms_of_service_accepted"
  criteria: "tou_accept"
  profile_group_id: "client18-profile-1"
  sample_id: 0
  first_event_timestamp: 2025-10-29T09:00:00+00:00
  event_extra: {has_timestamp: true}

# Test 19: client19-history-only - NOT IN OUTPUT (not in current day)
