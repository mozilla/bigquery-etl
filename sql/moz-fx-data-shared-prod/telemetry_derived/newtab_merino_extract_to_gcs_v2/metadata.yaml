friendly_name: Newtab Merino BigQuery Extract to Google Cloud Storage (GCS)
description: |-
  Newtab engagements aggregated on corpus_item_id are exported to a GCS bucket for Merino to consume.
  The table rebuilds every 20 minutes and aggregate one day of data.
owners:
- mmiermans@mozilla.com
- rrando@mozilla.com
labels:
  owner1: mmiermans
  dag: bqetl_merino_newtab_extract_to_gcs
  owner2: rrando
scheduling:
  dag_name: bqetl_merino_newtab_extract_to_gcs
  arguments:
  - --source-project=moz-fx-data-shared-prod
  - --source-dataset=telemetry_derived
  - --source-table=newtab_merino_extract_v2
  - --destination-bucket=merino-airflow-data-prodpy
  - --destination-prefix=newtab-merino-exports/engagement
  - --deletion-days-old=90
  referenced_tables:
  - - moz-fx-data-shared-prod
    - telemetry_derived
    - newtab_merino_extract_v2
bigquery: null
workgroup_access:
- role: roles/bigquery.dataViewer
  members:
  - workgroup:mozilla-confidential
references: {}
require_column_descriptions: false
