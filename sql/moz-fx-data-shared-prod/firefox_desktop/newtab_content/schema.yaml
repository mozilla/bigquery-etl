fields:
- name: additional_properties
  type: STRING
  mode: NULLABLE
  description: A JSON string containing any payload properties not present in the
    schema
- name: document_id
  type: STRING
  mode: NULLABLE
  description: The document ID specified in the URI when the client sent this message
- name: events
  type: RECORD
  mode: REPEATED
  fields:
  - name: category
    type: STRING
    mode: NULLABLE
  - name: extra
    type: RECORD
    mode: REPEATED
    fields:
    - name: key
      type: STRING
      mode: NULLABLE
    - name: value
      type: STRING
      mode: NULLABLE
  - name: name
    type: STRING
    mode: NULLABLE
  - name: timestamp
    type: INTEGER
    mode: NULLABLE
- name: metadata
  type: RECORD
  mode: NULLABLE
  fields:
  - name: geo
    type: RECORD
    mode: NULLABLE
    fields:
    - name: city
      type: STRING
      mode: NULLABLE
    - name: country
      type: STRING
      mode: NULLABLE
      description: An ISO 3166-1 alpha-2 country code
    - name: db_version
      type: STRING
      mode: NULLABLE
      description: The specific geo database version used for this lookup
    - name: subdivision1
      type: STRING
      mode: NULLABLE
      description: First major country subdivision, typically a state, province, or
        county
    - name: subdivision2
      type: STRING
      mode: NULLABLE
      description: Second major country subdivision; not applicable for most countries
    description: Results of a geographic lookup based on the client's IP address
  - name: header
    type: RECORD
    mode: NULLABLE
    fields:
    - name: date
      type: STRING
      mode: NULLABLE
      description: Date HTTP header
    - name: dnt
      type: STRING
      mode: NULLABLE
      description: DNT (Do Not Track) HTTP header
    - name: x_debug_id
      type: STRING
      mode: NULLABLE
      description: X-Debug-Id HTTP header
    - name: x_foxsec_ip_reputation
      type: STRING
      mode: NULLABLE
      description: X-Foxsec-IP-Reputation header
    - name: x_lb_tags
      type: STRING
      mode: NULLABLE
      description: X-LB-Tags HTTP header
    - name: x_pingsender_version
      type: STRING
      mode: NULLABLE
      description: X-PingSender-Version HTTP header
    - name: x_source_tags
      type: STRING
      mode: NULLABLE
      description: X-Source-Tags HTTP header
    - name: x_telemetry_agent
      type: STRING
      mode: NULLABLE
      description: X-Telemetry-Agent HTTP header
    - name: parsed_date
      type: TIMESTAMP
      mode: NULLABLE
    - name: parsed_x_source_tags
      type: STRING
      mode: REPEATED
    - name: parsed_x_lb_tags
      type: RECORD
      mode: NULLABLE
      fields:
      - name: tls_version
        type: STRING
        mode: NULLABLE
      - name: tls_cipher_hex
        type: STRING
        mode: NULLABLE
    description: Headers included in the client's HTTP request
  - name: isp
    type: RECORD
    mode: NULLABLE
    fields:
    - name: db_version
      type: STRING
      mode: NULLABLE
      description: The specific geo ISP database version used for this lookup
    - name: name
      type: STRING
      mode: NULLABLE
      description: The name of the ISP associated with the client's IP address
    - name: organization
      type: STRING
      mode: NULLABLE
      description: The name of a specific business entity associated with the client's
        IP address when available; otherwise the ISP name
    description: Results of ISP lookup based on the client's IP address
  - name: user_agent
    type: RECORD
    mode: NULLABLE
    fields:
    - name: browser
      type: STRING
      mode: NULLABLE
    - name: os
      type: STRING
      mode: NULLABLE
    - name: version
      type: STRING
      mode: NULLABLE
    description: Parsed components of the client's user agent string
- name: metrics
  type: RECORD
  mode: NULLABLE
  fields:
  - name: labeled_counter
    type: RECORD
    mode: NULLABLE
    fields:
    - name: glean_error_invalid_label
      type: RECORD
      mode: REPEATED
      fields:
      - name: key
        type: STRING
        mode: NULLABLE
      - name: value
        type: INTEGER
        mode: NULLABLE
      description: 'Counts the number of times a metric was set with an invalid label.

        The labels are the `category.name` identifier of the metric.

        '
    - name: glean_error_invalid_overflow
      type: RECORD
      mode: REPEATED
      fields:
      - name: key
        type: STRING
        mode: NULLABLE
      - name: value
        type: INTEGER
        mode: NULLABLE
      description: 'Counts the number of times a metric was set a value that overflowed.

        The labels are the `category.name` identifier of the metric.

        '
    - name: glean_error_invalid_state
      type: RECORD
      mode: REPEATED
      fields:
      - name: key
        type: STRING
        mode: NULLABLE
      - name: value
        type: INTEGER
        mode: NULLABLE
      description: 'Counts the number of times a timing metric was used incorrectly.

        The labels are the `category.name` identifier of the metric.

        '
    - name: glean_error_invalid_value
      type: RECORD
      mode: REPEATED
      fields:
      - name: key
        type: STRING
        mode: NULLABLE
      - name: value
        type: INTEGER
        mode: NULLABLE
      description: 'Counts the number of times a metric was set to an invalid value.

        The labels are the `category.name` identifier of the metric.

        '
  - name: object
    type: RECORD
    mode: NULLABLE
    fields:
    - name: newtab_content_active_experiments
      type: JSON
      mode: NULLABLE
      description: 'slugs of actively enrolled experiments

        '
    - name: newtab_content_active_rollouts
      type: JSON
      mode: NULLABLE
      description: 'slugs of actively enrolled rollouts

        '
    - name: newtab_content_enrollments_map
      type: JSON
      mode: NULLABLE
      description: 'Information about historic enrollments, including the branches
        enrolled.

        '
    - name: newtab_content_inferred_interests
      type: JSON
      mode: NULLABLE
      description: 'Differentially private high-level inferred interests (e.g. Entertainment
        or News), encoded in a JSON string. Key is the feature, and the value is a
        unary encoded string that must be decoded based on known differential privacy
        q and p values. Example "{"arts":"001"}"

        '
  - name: quantity
    type: RECORD
    mode: NULLABLE
    fields:
    - name: newtab_content_utc_offset
      type: INTEGER
      mode: NULLABLE
      description: '<0-24> positive UTC offset, rounded to the nearest integer number
        greater than 0. (If less than 0, then add 24.). The value may be clamped by
        expected time zone ranges for a surface.

        '
    - name: newtab_content_ping_version
      type: INTEGER
      mode: NULLABLE
      description: 'Marks major revisions of data collection methods or format for
        this ping. Because we are not recording Firefox version, this field has been
        added to assist the data pipeline. To avoid user possible fingerprinting,
        this should be updated only when necessary.

        '
  - name: string
    type: RECORD
    mode: NULLABLE
    fields:
    - name: glean_client_annotation_experimentation_id
      type: STRING
      mode: NULLABLE
      description: 'An experimentation identifier derived and provided by the application

        for the purpose of experimentation enrollment.

        '
    - name: newtab_content_coarse_os
      type: STRING
      mode: NULLABLE
      description: 'The name of the operating system. Possible values: Android, iOS,
        Linux, Windows, or macOS

        '
    - name: newtab_content_coarse_os_version
      type: STRING
      mode: NULLABLE
      description: 'The user-visible version of the operating system (e.g. "1.2.3").

        If the version detection fails, this metric gets set to 0.

        '
    - name: newtab_content_surface_id
      type: STRING
      mode: NULLABLE
      description: 'Surface id sent to the client from merino api

        '
    - name: newtab_content_country
      type: STRING
      mode: NULLABLE
      description: 'Records the detected home region of the user. This is the general
        region of the user''s machine.

        If a machine moves location, there is a minimum 2-week delay before this will
        be updated.

        See the [Region documentation](https://firefox-source-docs.mozilla.org/toolkit/modules/toolkit_modules/Region.html)
        for more information about updates.

        '
    - name: newtab_content_experiment_branch
      type: STRING
      mode: NULLABLE
      description: 'The branch of the primary new tab content experiment. We don''t
        include all experiments to prevent user fingerprinting.

        '
    - name: newtab_content_experiment_name
      type: STRING
      mode: NULLABLE
      description: 'The name of the primary new tab content experiment. We don''t
        include all experiments to prevent user fingerprinting.

        '
    - name: newtab_content_inferred_interests
      type: STRING
      mode: NULLABLE
      description: 'Differentially private high-level inferred interests (e.g. Entertainment
        or News), encoded in a JSON string. Key is the feature, and the value is a
        unary encoded string that must be decoded based on known differential privacy
        q and p values. Example "{"arts":"001"}"

        '
  - name: string_list
    type: RECORD
    mode: NULLABLE
    fields:
    - name: newtab_content_followed_sections
      type: STRING
      mode: REPEATED
    - name: glean_ping_uploader_capabilities
      type: STRING
      mode: REPEATED
- name: normalized_app_name
  type: STRING
  mode: NULLABLE
  description: Set to "Other" if this message contained an unrecognized app name
- name: normalized_channel
  type: STRING
  mode: NULLABLE
  description: Set to "Other" if this message contained an unrecognized channel name
- name: normalized_country_code
  type: STRING
  mode: NULLABLE
  description: An ISO 3166-1 alpha-2 country code
- name: normalized_os
  type: STRING
  mode: NULLABLE
  description: Set to "Other" if this message contained an unrecognized OS name
- name: normalized_os_version
  type: STRING
  mode: NULLABLE
- name: sample_id
  type: INTEGER
  mode: NULLABLE
  description: Hashed version of client_id (if present) useful for partitioning; ranges
    from 0 to 99
- name: submission_timestamp
  type: TIMESTAMP
  mode: NULLABLE
  description: Time when the ingestion edge server accepted this message
- name: is_bot_generated
  type: BOOLEAN
  mode: NULLABLE
