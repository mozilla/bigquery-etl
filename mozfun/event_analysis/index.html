
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Mozilla BigQuery ETL">
      
      
        <meta name="author" content="Mozilla Data Platform Team">
      
      
      
        <link rel="prev" href="../datetime_util/">
      
      
        <link rel="next" href="../ga/">
      
      
      <link rel="icon" href="../../favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.7">
    
    
      
        <title>event_analysis - BigQuery ETL</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.4b4a2bd9.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#event_analysis" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="BigQuery ETL" class="md-header__button md-logo" aria-label="BigQuery ETL" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            BigQuery ETL
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              event_analysis
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/mozilla/bigquery-etl/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    mozilla/bigquery-etl
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../mozdata/introduction/" class="md-tabs__link">
          
  
  Datasets

        </a>
      </li>
    
  

    
  

      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../about/" class="md-tabs__link">
          
  
  UDFs

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../cookbooks/common_workflows/" class="md-tabs__link">
          
  
  Cookbooks

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../bqetl/" class="md-tabs__link">
          
  
  Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="BigQuery ETL" class="md-nav__button md-logo" aria-label="BigQuery ETL" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    BigQuery ETL
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/mozilla/bigquery-etl/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    mozilla/bigquery-etl
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Datasets
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Datasets
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Mozdata
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Mozdata
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/accounts_backend/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Accounts backend
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/accounts_frontend/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    accounts-frontend
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/activity_stream/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Activity Stream
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/adjust/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Adjust
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/ads/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ads
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/amo_dev/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AMO Stats Dev
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/amo_prod/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AMO Stats Prod
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/analysis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Analysis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/app_store/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    App Store
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/apple_ads/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Apple Ads
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/bedrock/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    bedrock
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/bergamot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bergamot
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/blpadi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Blocklist ADI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/burnham/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    burnham
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/contextual_services/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    contextual-services
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/coverage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    coverage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/debug_ping_view/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    debug-ping-view
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/default_browser_agent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    default-browser-agent
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/edge_validator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    edge-validator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/eng_workflow/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    eng-workflow
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/fenix/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fenix
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/firefox_accounts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Firefox Accounts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/firefox_desktop/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Firefox Desktop
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/firefox_desktop_background_defaultagent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    firefox-desktop-background-defaultagent
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/firefox_desktop_background_tasks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    firefox-desktop-background-tasks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/firefox_desktop_background_update/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    firefox-desktop-background-update
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/firefox_echo_show/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Firefox Echo Show
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/firefox_fire_tv/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Firefox Fire Tv
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/firefox_installer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    firefox-installer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/firefox_ios/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Firefox iOS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/firefox_launcher_process/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    firefox-launcher-process
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/firefox_reality/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Firefox Reality
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/firefox_reality_pc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Firefox Reality Pc
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/firefox_translations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    firefox-translations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/fivetran_costs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fivetran Costs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/focus_android/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Focus Android
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/focus_ios/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Focus Ios
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/glean_dictionary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    glean-dictionary
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/google_ads/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Google_ads
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/hubs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hubs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/internet_outages/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Internet Outages
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/klar_android/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Klar Android
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/klar_ios/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Klar Ios
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/lockwise_android/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lockwise Android
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/lockwise_ios/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lockwise Ios
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/mach/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mach
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/mdn_yari/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mdn-yari
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/messaging_system/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    messaging-system
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/mlhackweek_search/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mlhackweek-search
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/mobile/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mobile
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/monitor_cirrus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    monitor-cirrus
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/monitor_frontend/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    monitor-frontend
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/monitoring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Monitoring
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/moso_mastodon_backend/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    moso-mastodon-backend
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/moso_mastodon_web/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    moso-mastodon-web
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/mozdata/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mozdata
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/mozilla_lockbox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mozilla-lockbox
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/mozilla_mach/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mozilla-mach
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/mozilla_org/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mozilla.org
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/mozilla_vpn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mozilla VPN
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/mozillavpn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mozillavpn
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/mozphab/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mozphab
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/mozregression/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mozregression
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/mozza/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mozza
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/operational_monitoring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Operational Monitoring
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/org_mozilla_bergamot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    org-mozilla-bergamot
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/org_mozilla_broken_site_report/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Broken site reports
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/org_mozilla_connect_firefox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    org-mozilla-connect-firefox
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/org_mozilla_fenix/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    org-mozilla-fenix
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/org_mozilla_fenix_nightly/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    org-mozilla-fenix-nightly
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/org_mozilla_fennec_aurora/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    org-mozilla-fennec-aurora
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/org_mozilla_firefox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    org-mozilla-firefox
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/org_mozilla_firefox_beta/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Org Mozilla Firefox Beta
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/org_mozilla_firefox_vpn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    org-mozilla-firefox-vpn
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/org_mozilla_firefoxreality/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    org-mozilla-firefoxreality
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/org_mozilla_focus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    org-mozilla-focus
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/org_mozilla_focus_beta/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    org-mozilla-focus-beta
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/org_mozilla_focus_nightly/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    org-mozilla-focus-nightly
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/org_mozilla_ios_fennec/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    org-mozilla-ios-fennec
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/org_mozilla_ios_firefox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    org-mozilla-ios-firefox
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/org_mozilla_ios_firefoxbeta/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    org-mozilla-ios-firefoxbeta
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/org_mozilla_ios_firefoxvpn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    org-mozilla-ios-firefoxvpn
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/org_mozilla_ios_firefoxvpn_network_extension/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    org-mozilla-ios-firefoxvpn-network-extension
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/org_mozilla_ios_focus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    org-mozilla-ios-focus
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/org_mozilla_ios_klar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    org-mozilla-ios-klar
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/org_mozilla_ios_lockbox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    org-mozilla-ios-lockbox
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/org_mozilla_klar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    org-mozilla-klar
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/org_mozilla_mozregression/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    org-mozilla-mozregression
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/org_mozilla_reference_browser/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    org-mozilla-reference-browser
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/org_mozilla_tv_firefox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    org-mozilla-tv-firefox
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/org_mozilla_vrbrowser/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    org-mozilla-vrbrowser
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/pine/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pine
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/pocket/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pocket
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/reference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reference
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/reference_browser/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reference Browser
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/regrets_reporter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    regrets-reporter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/regrets_reporter_ucs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    regrets-reporter-ucs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/relay/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Firefox Relay
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/search/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Search
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/search_terms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Search Terms
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/static/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Static Data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/stripe/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Stripe
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/stub_attribution_service/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Stub Attribution Service
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/subscription_platform/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Subscription Platform
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/telemetry/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Telemetry
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/treeherder/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    treeherder
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/udf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    User-Defined Functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/udf_js/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    User-Defined Functions (Javascript)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/udf_js_lib/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    udf_js_lib
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/udf_legacy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    User-Defined Functions (Legacy)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/viu_politica/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    viu-politica
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mozdata/webpagetest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    webpagetest
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    UDFs
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            UDFs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" checked>
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Mozfun
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Mozfun
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mozfun
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../addons/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Addons
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../bits28/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    bits28
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../bytes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    bytes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../datetime_util/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    datetime_util.fxa_parse_date
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    event_analysis
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    event_analysis
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#create_events_view-stored-procedure" class="md-nav__link">
    create_events_view (Stored Procedure)
  </a>
  
    <nav class="md-nav" aria-label="create_events_view (Stored Procedure)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    Usage
  </a>
  
    <nav class="md-nav" aria-label="Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#recommended-pattern" class="md-nav__link">
    Recommended Pattern
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structure-of-the-resulting-view" class="md-nav__link">
    Structure of the Resulting View
  </a>
  
    <nav class="md-nav" aria-label="Structure of the Resulting View">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#funnels" class="md-nav__link">
    Funnels
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event-counts" class="md-nav__link">
    Event Counts
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    Examples
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extract_event_counts-udf" class="md-nav__link">
    extract_event_counts (UDF)
  </a>
  
    <nav class="md-nav" aria-label="extract_event_counts (UDF)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#usage_1" class="md-nav__link">
    Usage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parameters_1" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create_count_steps_query-stored-procedure" class="md-nav__link">
    create_count_steps_query (Stored Procedure)
  </a>
  
    <nav class="md-nav" aria-label="create_count_steps_query (Stored Procedure)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_2" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#event_index_to_match_string-udf" class="md-nav__link">
    event_index_to_match_string (UDF)
  </a>
  
    <nav class="md-nav" aria-label="event_index_to_match_string (UDF)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_3" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aggregate_match_strings-udf" class="md-nav__link">
    aggregate_match_strings (UDF)
  </a>
  
    <nav class="md-nav" aria-label="aggregate_match_strings (UDF)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_4" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#escape_metachars-udf" class="md-nav__link">
    escape_metachars (UDF)
  </a>
  
    <nav class="md-nav" aria-label="escape_metachars (UDF)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_5" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get_funnel_steps_sql-stored-procedure" class="md-nav__link">
    get_funnel_steps_sql (Stored Procedure)
  </a>
  
    <nav class="md-nav" aria-label="get_funnel_steps_sql (Stored Procedure)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_6" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create_funnel_steps_query-stored-procedure" class="md-nav__link">
    create_funnel_steps_query (Stored Procedure)
  </a>
  
    <nav class="md-nav" aria-label="create_funnel_steps_query (Stored Procedure)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_7" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get_count_sql-stored-procedure" class="md-nav__link">
    get_count_sql (Stored Procedure)
  </a>
  
    <nav class="md-nav" aria-label="get_count_sql (Stored Procedure)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_8" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create_funnel_regex-udf" class="md-nav__link">
    create_funnel_regex (UDF)
  </a>
  
    <nav class="md-nav" aria-label="create_funnel_regex (UDF)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_9" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extract_event_counts_with_properties-udf" class="md-nav__link">
    extract_event_counts_with_properties (UDF)
  </a>
  
    <nav class="md-nav" aria-label="extract_event_counts_with_properties (UDF)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#usage_2" class="md-nav__link">
    Usage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_1" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#caveats" class="md-nav__link">
    Caveats
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parameters_10" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../ga/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ga
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../glam/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Glam
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../glean/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    glean
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../hist/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    hist
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../iap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    iap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../json/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    json
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../map/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    map
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../norm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    norm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../stats/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    stats
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../vpn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    vpn
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Cookbooks
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Cookbooks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbooks/common_workflows/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Common workflows
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbooks/creating_a_derived_dataset/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creating a derived dataset
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cookbooks/testing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../bqetl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    bqetl CLI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/recommended_practices/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Recommended practices
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/incremental/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Incremental queries
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/scheduling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scheduling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/public_data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Public data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/airflow_tags/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Airflow Tags
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/data_checks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data Checks
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#create_events_view-stored-procedure" class="md-nav__link">
    create_events_view (Stored Procedure)
  </a>
  
    <nav class="md-nav" aria-label="create_events_view (Stored Procedure)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    Usage
  </a>
  
    <nav class="md-nav" aria-label="Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#recommended-pattern" class="md-nav__link">
    Recommended Pattern
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structure-of-the-resulting-view" class="md-nav__link">
    Structure of the Resulting View
  </a>
  
    <nav class="md-nav" aria-label="Structure of the Resulting View">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#funnels" class="md-nav__link">
    Funnels
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event-counts" class="md-nav__link">
    Event Counts
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    Examples
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extract_event_counts-udf" class="md-nav__link">
    extract_event_counts (UDF)
  </a>
  
    <nav class="md-nav" aria-label="extract_event_counts (UDF)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#usage_1" class="md-nav__link">
    Usage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parameters_1" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create_count_steps_query-stored-procedure" class="md-nav__link">
    create_count_steps_query (Stored Procedure)
  </a>
  
    <nav class="md-nav" aria-label="create_count_steps_query (Stored Procedure)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_2" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#event_index_to_match_string-udf" class="md-nav__link">
    event_index_to_match_string (UDF)
  </a>
  
    <nav class="md-nav" aria-label="event_index_to_match_string (UDF)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_3" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aggregate_match_strings-udf" class="md-nav__link">
    aggregate_match_strings (UDF)
  </a>
  
    <nav class="md-nav" aria-label="aggregate_match_strings (UDF)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_4" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#escape_metachars-udf" class="md-nav__link">
    escape_metachars (UDF)
  </a>
  
    <nav class="md-nav" aria-label="escape_metachars (UDF)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_5" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get_funnel_steps_sql-stored-procedure" class="md-nav__link">
    get_funnel_steps_sql (Stored Procedure)
  </a>
  
    <nav class="md-nav" aria-label="get_funnel_steps_sql (Stored Procedure)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_6" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create_funnel_steps_query-stored-procedure" class="md-nav__link">
    create_funnel_steps_query (Stored Procedure)
  </a>
  
    <nav class="md-nav" aria-label="create_funnel_steps_query (Stored Procedure)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_7" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get_count_sql-stored-procedure" class="md-nav__link">
    get_count_sql (Stored Procedure)
  </a>
  
    <nav class="md-nav" aria-label="get_count_sql (Stored Procedure)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_8" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create_funnel_regex-udf" class="md-nav__link">
    create_funnel_regex (UDF)
  </a>
  
    <nav class="md-nav" aria-label="create_funnel_regex (UDF)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parameters_9" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extract_event_counts_with_properties-udf" class="md-nav__link">
    extract_event_counts_with_properties (UDF)
  </a>
  
    <nav class="md-nav" aria-label="extract_event_counts_with_properties (UDF)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#usage_2" class="md-nav__link">
    Usage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_1" class="md-nav__link">
    Example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#caveats" class="md-nav__link">
    Caveats
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parameters_10" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="event_analysis">event_analysis</h1>
<p>These functions are specific for use with the <code>events_daily</code> and <code>event_types</code> tables.
By themselves, these two tables are nearly impossible to use since the event history
is compressed; however, these stored procedures should make the data accessible.</p>
<p>The <code>events_daily</code> table is created as a result of two steps:
1. Map each event to a single UTF8 char which will represent it
2. Group each client-day and store a string that records, using the
    compressed format, that clients' event history for that day.
    The characters are ordered by the timestamp which they appeared
    that day.</p>
<p>The best way to access this data is to create a view to do the heavy lifting.
For example, to see which clients completed a certain action, you can create a view using these functions that
knows what that action's representation is (using the compressed mapping from 1.) and
create a regex string that checks for the presence of that event. The view makes this
transparent, and allows users to simply query a boolean field representing the presence
of that event on that day.</p>
<h2 id="create_events_view-stored-procedure">create_events_view (Stored Procedure)</h2>
<p>Create a view that queries the <code>events_daily</code> table. This view currently supports both funnels and event counts.
Funnels are created as a struct, with each step in the funnel as a boolean column in the struct, indicating whether the user completed that step on that day.
Event counts are simply integers.</p>
<h3 id="usage">Usage</h3>
<div class="highlight"><pre><span></span><code><span class="n">create_events_view</span><span class="p">(</span>
<span class="w">    </span><span class="n">view_name</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<span class="w">    </span><span class="n">project</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<span class="w">    </span><span class="n">dataset</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<span class="w">    </span><span class="n">funnels</span><span class="w"> </span><span class="nb">ARRAY</span><span class="o">&lt;</span><span class="n">STRUCT</span><span class="o">&lt;</span>
<span class="w">        </span><span class="n">funnel_name</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<span class="w">        </span><span class="n">funnel</span><span class="w"> </span><span class="nb">ARRAY</span><span class="o">&lt;</span><span class="n">STRUCT</span><span class="o">&lt;</span>
<span class="w">            </span><span class="n">step_name</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<span class="w">            </span><span class="n">events</span><span class="w"> </span><span class="nb">ARRAY</span><span class="o">&lt;</span><span class="n">STRUCT</span><span class="o">&lt;</span>
<span class="w">                </span><span class="n">category</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<span class="w">                </span><span class="n">event_name</span><span class="w"> </span><span class="n">STRING</span><span class="o">&gt;&gt;&gt;&gt;&gt;&gt;</span><span class="p">,</span>
<span class="w">    </span><span class="n">counts</span><span class="w"> </span><span class="nb">ARRAY</span><span class="o">&lt;</span><span class="n">STRUCT</span><span class="o">&lt;</span>
<span class="w">        </span><span class="n">count_name</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<span class="w">        </span><span class="n">events</span><span class="w"> </span><span class="nb">ARRAY</span><span class="o">&lt;</span><span class="n">STRUCT</span><span class="o">&lt;</span>
<span class="w">            </span><span class="n">category</span><span class="w"> </span><span class="n">STRING</span><span class="p">,</span>
<span class="w">            </span><span class="n">event_name</span><span class="w"> </span><span class="n">STRING</span><span class="o">&gt;&gt;&gt;&gt;</span>
<span class="w">  </span><span class="p">)</span>
</code></pre></div>
<ul>
<li><code>view_name</code>: The name of the view that will be created. This view
    will be in the shared-prod project, in the analysis bucket,
    and so will be queryable at:
        <div class="highlight"><pre><span></span><code><span class="o">`</span><span class="n">moz</span><span class="o">-</span><span class="n">fx</span><span class="o">-</span><span class="k">data</span><span class="o">-</span><span class="n">shared</span><span class="o">-</span><span class="n">prod</span><span class="o">`</span><span class="p">.</span><span class="n">analysis</span><span class="p">.</span><span class="err">{</span><span class="n">view_name</span><span class="err">}</span>
</code></pre></div></li>
</ul>
<ul>
<li><code>project</code>: The project where the <code>dataset</code> is located.</li>
</ul>
<ul>
<li><code>dataset</code>: The dataset that must contain both the <code>events_daily</code> and
    <code>event_types</code> tables.</li>
</ul>
<ul>
<li><code>funnels</code>: An array of funnels that will be created. Each funnel has
    two parts:
    1. <code>funnel_name</code>: The name of the funnel is what the column representing
        the funnel will be named in the view. For example, with the value
        <code>"onboarding"</code>, the view can be selected as follows:
        <div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="n">onboarding</span>
<span class="k">FROM</span><span class="w"> </span><span class="o">`</span><span class="n">moz</span><span class="o">-</span><span class="n">fx</span><span class="o">-</span><span class="k">data</span><span class="o">-</span><span class="n">shared</span><span class="o">-</span><span class="n">prod</span><span class="o">`</span><span class="p">.</span><span class="n">analysis</span><span class="p">.</span><span class="err">{</span><span class="n">view_name</span><span class="err">}</span>
</code></pre></div>
    2. <code>funnel</code>: The ordered series of steps that make up a funnel.
        Each step also has:
        1. <code>step_name</code>: Used to name the column
            within the funnel and represents whether the user completed
            that step on that day. For example, within <code>onboarding</code> a user may
            have <code>completed_first_card</code> as a step; this can be queried at
            <div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="n">onboarding</span><span class="p">.</span><span class="n">completed_first_step</span>
<span class="k">FROM</span><span class="w"> </span><span class="o">`</span><span class="n">moz</span><span class="o">-</span><span class="n">fx</span><span class="o">-</span><span class="k">data</span><span class="o">-</span><span class="n">shared</span><span class="o">-</span><span class="n">prod</span><span class="o">`</span><span class="p">.</span><span class="n">analysis</span><span class="p">.</span><span class="err">{</span><span class="n">view_name</span><span class="err">}</span>
</code></pre></div>
        2. <code>events</code>: The set of events which indicate the user completed
            that step of the funnel. Most of the time this is a single event.
            Each event has a <code>category</code> and <code>event_name</code>.</li>
</ul>
<ul>
<li><code>counts</code>: An array of counts. Each count has two parts, similar to funnel steps:
    1. <code>count_name</code>: Used to name the column representing the event count. E.g.
        <code>"clicked_settings_count"</code> would be queried at
        <div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="n">clicked_settings_count</span>
<span class="k">FROM</span><span class="w"> </span><span class="o">`</span><span class="n">moz</span><span class="o">-</span><span class="n">fx</span><span class="o">-</span><span class="k">data</span><span class="o">-</span><span class="n">shared</span><span class="o">-</span><span class="n">prod</span><span class="o">`</span><span class="p">.</span><span class="n">analysis</span><span class="p">.</span><span class="err">{</span><span class="n">view_name</span><span class="err">}</span>
</code></pre></div>
    2. <code>events</code>: The set of events you want to count. Each event has
        a <code>category</code> and <code>event_name</code>.</li>
</ul>
<h4 id="recommended-pattern">Recommended Pattern</h4>
<p>Because the view definitions themselves are not informative about the contents of the events fields,
it is best to put your query immediately after the procedure invocation, rather than invoking the procedure and running a separate query.</p>
<p><a href="https://sql.telemetry.mozilla.org/queries/75243/source">This STMO query</a> is an example of doing so.
This allows viewers of the query to easily interpret what the funnel and count columns represent.</p>
<h4 id="structure-of-the-resulting-view">Structure of the Resulting View</h4>
<p>The view will be created at 
<div class="highlight"><pre><span></span><code>`moz-fx-data-shared-prod`.analysis.{event_name}.
</code></pre></div></p>
<p>The view will have a schema roughly matching the following:
<div class="highlight"><pre><span></span><code>root
 |-- submission_date: date
 |-- client_id: string
 |-- {funnel_1_name}: record
 |  |-- {funnel_step_1_name} boolean
 |  |-- {funnel_step_2_name} boolean
 ...
 |-- {funnel_N_name}: record
 |  |-- {funnel_step_M_name}: boolean
 |-- {count_1_name}: integer
 ...
 |-- {count_N_name}: integer
 ...dimensions...
</code></pre></div></p>
<h5 id="funnels">Funnels</h5>
<p>Each funnel will be a <code>STRUCT</code> with nested columns representing completion of each step
The types of those columns are boolean, and represent whether the user completed that
step on that day.</p>
<div class="highlight"><pre><span></span><code><span class="n">STRUCT</span><span class="p">(</span>
<span class="w">    </span><span class="n">completed_step_1</span><span class="w"> </span><span class="nb">BOOLEAN</span><span class="p">,</span>
<span class="w">    </span><span class="n">completed_step_2</span><span class="w"> </span><span class="nb">BOOLEAN</span><span class="p">,</span>
<span class="w">    </span><span class="p">...</span>
<span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">funnel_name</span>
</code></pre></div>
<p>With one row per-user per-day, you can use <code>COUNTIF(funnel_name.completed_step_N)</code> to query
these fields. See below for an example.</p>
<h5 id="event-counts">Event Counts</h5>
<p>Each event count is simply an <code>INT64</code> representing the number of times the user completed
those events on that day. If there are multiple events represented within one count,
the values are summed. For example, if you wanted to know the number of times a user
opened or closed the app, you could create a single event count with those two
events.</p>
<div class="highlight"><pre><span></span><code><span class="n">event_count_name</span><span class="w"> </span><span class="n">INT64</span>
</code></pre></div>
<h3 id="examples">Examples</h3>
<p>The following creates a few fields:
- <code>collection_flow</code> is a funnel for those that started creating
    a collection within Fenix, and then finished, either by adding
    those tabs to an existing collection or saving it as a new
    collection.
- <code>collection_flow_saved</code> represents users who started the collection
    flow then saved it as a new collection.
- <code>number_of_collections_created</code> is the number of collections created
- <code>number_of_collections_deleted</code> is the number of collections deleted</p>
<div class="highlight"><pre><span></span><code><span class="k">CALL</span><span class="w"> </span><span class="n">mozfun</span><span class="p">.</span><span class="n">event_analysis</span><span class="p">.</span><span class="n">create_events_view</span><span class="p">(</span>
<span class="w">  </span><span class="s1">&#39;fenix_collection_funnels&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="s1">&#39;moz-fx-data-shared-prod&#39;</span><span class="p">,</span>
<span class="w">  </span><span class="s1">&#39;org_mozilla_firefox&#39;</span><span class="p">,</span>

<span class="w">  </span><span class="c1">-- Funnels</span>
<span class="w">  </span><span class="p">[</span>
<span class="w">    </span><span class="n">STRUCT</span><span class="p">(</span>
<span class="w">      </span><span class="ss">&quot;collection_flow&quot;</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">funnel_name</span><span class="p">,</span>
<span class="w">      </span><span class="p">[</span><span class="n">STRUCT</span><span class="p">(</span>
<span class="w">        </span><span class="ss">&quot;started_collection_creation&quot;</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">step_name</span><span class="p">,</span>
<span class="w">        </span><span class="p">[</span><span class="n">STRUCT</span><span class="p">(</span><span class="s1">&#39;collections&#39;</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">category</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;tab_select_opened&#39;</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">event_name</span><span class="p">)]</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">events</span><span class="p">),</span>
<span class="w">      </span><span class="n">STRUCT</span><span class="p">(</span>
<span class="w">        </span><span class="ss">&quot;completed_collection_creation&quot;</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">step_name</span><span class="p">,</span>
<span class="w">        </span><span class="p">[</span><span class="n">STRUCT</span><span class="p">(</span><span class="s1">&#39;collections&#39;</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">category</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;saved&#39;</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">event_name</span><span class="p">),</span>
<span class="w">        </span><span class="n">STRUCT</span><span class="p">(</span><span class="s1">&#39;collections&#39;</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">category</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;tabs_added&#39;</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">event_name</span><span class="p">)]</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">events</span><span class="p">)</span>
<span class="w">    </span><span class="p">]</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">funnel</span><span class="p">),</span>

<span class="w">    </span><span class="n">STRUCT</span><span class="p">(</span>
<span class="w">      </span><span class="ss">&quot;collection_flow_saved&quot;</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">funnel_name</span><span class="p">,</span>
<span class="w">      </span><span class="p">[</span><span class="n">STRUCT</span><span class="p">(</span>
<span class="w">        </span><span class="ss">&quot;started_collection_creation&quot;</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">step_name</span><span class="p">,</span>
<span class="w">        </span><span class="p">[</span><span class="n">STRUCT</span><span class="p">(</span><span class="s1">&#39;collections&#39;</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">category</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;tab_select_opened&#39;</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">event_name</span><span class="p">)]</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">events</span><span class="p">),</span>
<span class="w">      </span><span class="n">STRUCT</span><span class="p">(</span>
<span class="w">        </span><span class="ss">&quot;saved_collection&quot;</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">step_name</span><span class="p">,</span>
<span class="w">        </span><span class="p">[</span><span class="n">STRUCT</span><span class="p">(</span><span class="s1">&#39;collections&#39;</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">category</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;saved&#39;</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">event_name</span><span class="p">)]</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">events</span><span class="p">)</span>
<span class="w">    </span><span class="p">]</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">funnel</span><span class="p">)</span>
<span class="w">  </span><span class="p">],</span>

<span class="w">  </span><span class="c1">-- Event Counts</span>
<span class="w">  </span><span class="p">[</span>
<span class="w">    </span><span class="n">STRUCT</span><span class="p">(</span>
<span class="w">      </span><span class="ss">&quot;number_of_collections_created&quot;</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">count_name</span><span class="p">,</span>
<span class="w">      </span><span class="p">[</span><span class="n">STRUCT</span><span class="p">(</span><span class="s1">&#39;collections&#39;</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">category</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;saved&#39;</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">event_name</span><span class="p">)]</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">events</span>
<span class="w">    </span><span class="p">),</span>
<span class="w">    </span><span class="n">STRUCT</span><span class="p">(</span>
<span class="w">      </span><span class="ss">&quot;number_of_collections_deleted&quot;</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">count_name</span><span class="p">,</span>
<span class="w">      </span><span class="p">[</span><span class="n">STRUCT</span><span class="p">(</span><span class="s1">&#39;collections&#39;</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">category</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;removed&#39;</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">event_name</span><span class="p">)]</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">events</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">);</span>
</code></pre></div>
<p>From there, you can query a few things. For example, the fraction 
of users who completed each step of the collection flow over time:
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span>
<span class="w">    </span><span class="n">submission_date</span><span class="p">,</span>
<span class="w">    </span><span class="n">COUNTIF</span><span class="p">(</span><span class="n">collection_flow</span><span class="p">.</span><span class="n">started_collection_creation</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">started_collection_creation</span><span class="p">,</span>
<span class="w">    </span><span class="n">COUNTIF</span><span class="p">(</span><span class="n">collection_flow</span><span class="p">.</span><span class="n">completed_collection_creation</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">completed_collection_creation</span><span class="p">,</span>
<span class="k">FROM</span>
<span class="w">    </span><span class="o">`</span><span class="n">moz</span><span class="o">-</span><span class="n">fx</span><span class="o">-</span><span class="k">data</span><span class="o">-</span><span class="n">shared</span><span class="o">-</span><span class="n">prod</span><span class="o">`</span><span class="p">.</span><span class="n">analysis</span><span class="p">.</span><span class="n">fenix_collection_funnels</span>
<span class="k">WHERE</span>
<span class="w">    </span><span class="n">submission_date</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">DATE_SUB</span><span class="p">(</span><span class="k">current_date</span><span class="p">,</span><span class="w"> </span><span class="nb">INTERVAL</span><span class="w"> </span><span class="mi">28</span><span class="w"> </span><span class="k">DAY</span><span class="p">)</span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span>
<span class="w">    </span><span class="n">submission_date</span>
</code></pre></div></p>
<p>Or you can see the number of collections created and deleted:
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span>
<span class="w">    </span><span class="n">submission_date</span><span class="p">,</span>
<span class="w">    </span><span class="k">SUM</span><span class="p">(</span><span class="n">number_of_collections_created</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">number_of_collections_created</span><span class="p">,</span>
<span class="w">    </span><span class="k">SUM</span><span class="p">(</span><span class="n">number_of_collections_deleted</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">number_of_collections_deleted</span><span class="p">,</span>
<span class="k">FROM</span>
<span class="w">    </span><span class="o">`</span><span class="n">moz</span><span class="o">-</span><span class="n">fx</span><span class="o">-</span><span class="k">data</span><span class="o">-</span><span class="n">shared</span><span class="o">-</span><span class="n">prod</span><span class="o">`</span><span class="p">.</span><span class="n">analysis</span><span class="p">.</span><span class="n">fenix_collection_funnels</span>
<span class="k">WHERE</span>
<span class="w">    </span><span class="n">submission_date</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">DATE_SUB</span><span class="p">(</span><span class="k">current_date</span><span class="p">,</span><span class="w"> </span><span class="nb">INTERVAL</span><span class="w"> </span><span class="mi">28</span><span class="w"> </span><span class="k">DAY</span><span class="p">)</span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span>
<span class="w">    </span><span class="n">submission_date</span>
</code></pre></div></p>
<h3 id="parameters">Parameters</h3>
<p><strong>INPUTS</strong></p>
<div class="highlight"><pre><span></span><code>view_name STRING, project STRING, dataset STRING, funnels ARRAY&lt;STRUCT&lt;funnel_name STRING, funnel ARRAY&lt;STRUCT&lt;step_name STRING, events ARRAY&lt;STRUCT&lt;category STRING, event_name STRING&gt;&gt;&gt;&gt;&gt;&gt;, counts ARRAY&lt;STRUCT&lt;count_name STRING, events ARRAY&lt;STRUCT&lt;category STRING, event_name STRING&gt;&gt;&gt;&gt;
</code></pre></div>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql//mozfun/event_analysis/create_events_view">Source</a>  |  <a href="https://github.com/mozilla/bigquery-etl/edit/generated-sql/sql//mozfun/event_analysis/create_events_view/metadata.yaml">Edit</a></p>
<h2 id="extract_event_counts-udf">extract_event_counts (UDF)</h2>
<p>Extract the events and their counts from an events string.
This function explicitly ignores event properties, and retrieves just the counts of the top-level events.</p>
<h3 id="usage_1">Usage</h3>
<div class="highlight"><pre><span></span><code>extract_event_counts(
    events STRING
)
</code></pre></div>
<p><code>events</code> - A comma-separated events string,
where each event is represented as a string
of unicode chars.</p>
<h3 id="example">Example</h3>
<p>See <a href="https://sql.telemetry.mozilla.org/dashboard/fenix-events">this dashboard</a>
for example usage.</p>
<h3 id="parameters_1">Parameters</h3>
<p><strong>INPUTS</strong></p>
<div class="highlight"><pre><span></span><code>events STRING
</code></pre></div>
<p><strong>OUTPUTS</strong></p>
<div class="highlight"><pre><span></span><code>ARRAY&lt;STRUCT&lt;index STRING, count INT64&gt;&gt;
</code></pre></div>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql//mozfun/event_analysis/extract_event_counts">Source</a>  |  <a href="https://github.com/mozilla/bigquery-etl/edit/generated-sql/sql//mozfun/event_analysis/extract_event_counts/metadata.yaml">Edit</a></p>
<h2 id="create_count_steps_query-stored-procedure">create_count_steps_query (Stored Procedure)</h2>
<p>Generate the SQL statement that can be used to create an easily queryable view on events data.</p>
<h3 id="parameters_2">Parameters</h3>
<p><strong>INPUTS</strong></p>
<div class="highlight"><pre><span></span><code>project STRING, dataset STRING, events ARRAY&lt;STRUCT&lt;category STRING, event_name STRING&gt;&gt;
</code></pre></div>
<p><strong>OUTPUTS</strong></p>
<div class="highlight"><pre><span></span><code>sql STRING
</code></pre></div>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql//mozfun/event_analysis/create_count_steps_query">Source</a>  |  <a href="https://github.com/mozilla/bigquery-etl/edit/generated-sql/sql//mozfun/event_analysis/create_count_steps_query/metadata.yaml">Edit</a></p>
<h2 id="event_index_to_match_string-udf">event_index_to_match_string (UDF)</h2>
<p>Given an event index string, create a match string that is an exact match in the events_daily table.</p>
<h3 id="parameters_3">Parameters</h3>
<p><strong>INPUTS</strong></p>
<div class="highlight"><pre><span></span><code>index STRING
</code></pre></div>
<p><strong>OUTPUTS</strong></p>
<div class="highlight"><pre><span></span><code>STRING
</code></pre></div>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql//mozfun/event_analysis/event_index_to_match_string">Source</a>  |  <a href="https://github.com/mozilla/bigquery-etl/edit/generated-sql/sql//mozfun/event_analysis/event_index_to_match_string/metadata.yaml">Edit</a></p>
<h2 id="aggregate_match_strings-udf">aggregate_match_strings (UDF)</h2>
<p>Given an array of strings that each match a single event, aggregate those into a single regex string that will match any of the events.</p>
<h3 id="parameters_4">Parameters</h3>
<p><strong>INPUTS</strong></p>
<div class="highlight"><pre><span></span><code>match_strings ARRAY&lt;STRING&gt;
</code></pre></div>
<p><strong>OUTPUTS</strong></p>
<div class="highlight"><pre><span></span><code>STRING
</code></pre></div>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql//mozfun/event_analysis/aggregate_match_strings">Source</a>  |  <a href="https://github.com/mozilla/bigquery-etl/edit/generated-sql/sql//mozfun/event_analysis/aggregate_match_strings/metadata.yaml">Edit</a></p>
<h2 id="escape_metachars-udf">escape_metachars (UDF)</h2>
<p>Escape all metachars from a regex string. This will make the string an exact match, no matter what it contains.</p>
<h3 id="parameters_5">Parameters</h3>
<p><strong>INPUTS</strong></p>
<div class="highlight"><pre><span></span><code>s STRING
</code></pre></div>
<p><strong>OUTPUTS</strong></p>
<div class="highlight"><pre><span></span><code>STRING
</code></pre></div>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql//mozfun/event_analysis/escape_metachars">Source</a>  |  <a href="https://github.com/mozilla/bigquery-etl/edit/generated-sql/sql//mozfun/event_analysis/escape_metachars/metadata.yaml">Edit</a></p>
<h2 id="get_funnel_steps_sql-stored-procedure">get_funnel_steps_sql (Stored Procedure)</h2>
<p>For a given funnel, get a SQL statement that can be used to determine if an events string contains that funnel.</p>
<h3 id="parameters_6">Parameters</h3>
<p><strong>INPUTS</strong></p>
<div class="highlight"><pre><span></span><code>project STRING, dataset STRING, funnel_name STRING, funnel ARRAY&lt;STRUCT&lt;step_name STRING, list ARRAY&lt;STRUCT&lt;category STRING, event_name STRING&gt;&gt;&gt;&gt;
</code></pre></div>
<p><strong>OUTPUTS</strong></p>
<div class="highlight"><pre><span></span><code>funnel_sql STRING
</code></pre></div>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql//mozfun/event_analysis/get_funnel_steps_sql">Source</a>  |  <a href="https://github.com/mozilla/bigquery-etl/edit/generated-sql/sql//mozfun/event_analysis/get_funnel_steps_sql/metadata.yaml">Edit</a></p>
<h2 id="create_funnel_steps_query-stored-procedure">create_funnel_steps_query (Stored Procedure)</h2>
<p>Generate the SQL statement that can be used to create an easily queryable view on events data.</p>
<h3 id="parameters_7">Parameters</h3>
<p><strong>INPUTS</strong></p>
<div class="highlight"><pre><span></span><code>project STRING, dataset STRING, funnel ARRAY&lt;STRUCT&lt;list ARRAY&lt;STRUCT&lt;category STRING, event_name STRING&gt;&gt;&gt;&gt;
</code></pre></div>
<p><strong>OUTPUTS</strong></p>
<div class="highlight"><pre><span></span><code>sql STRING
</code></pre></div>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql//mozfun/event_analysis/create_funnel_steps_query">Source</a>  |  <a href="https://github.com/mozilla/bigquery-etl/edit/generated-sql/sql//mozfun/event_analysis/create_funnel_steps_query/metadata.yaml">Edit</a></p>
<h2 id="get_count_sql-stored-procedure">get_count_sql (Stored Procedure)</h2>
<p>For a given funnel, get a SQL statement that can be used to determine if an events string contains that funnel.</p>
<h3 id="parameters_8">Parameters</h3>
<p><strong>INPUTS</strong></p>
<div class="highlight"><pre><span></span><code>project STRING, dataset STRING, count_name STRING, events ARRAY&lt;STRUCT&lt;category STRING, event_name STRING&gt;&gt;
</code></pre></div>
<p><strong>OUTPUTS</strong></p>
<div class="highlight"><pre><span></span><code>count_sql STRING
</code></pre></div>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql//mozfun/event_analysis/get_count_sql">Source</a>  |  <a href="https://github.com/mozilla/bigquery-etl/edit/generated-sql/sql//mozfun/event_analysis/get_count_sql/metadata.yaml">Edit</a></p>
<h2 id="create_funnel_regex-udf">create_funnel_regex (UDF)</h2>
<p>Given an array of match strings, each representing a single funnel step, aggregate them into a regex string that will match only against the entire funnel. If intermediate_steps is TRUE, this allows for there to be events that occur between the funnel steps.</p>
<h3 id="parameters_9">Parameters</h3>
<p><strong>INPUTS</strong></p>
<div class="highlight"><pre><span></span><code>step_regexes ARRAY&lt;STRING&gt;, intermediate_steps BOOLEAN
</code></pre></div>
<p><strong>OUTPUTS</strong></p>
<div class="highlight"><pre><span></span><code>STRING
</code></pre></div>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql//mozfun/event_analysis/create_funnel_regex">Source</a>  |  <a href="https://github.com/mozilla/bigquery-etl/edit/generated-sql/sql//mozfun/event_analysis/create_funnel_regex/metadata.yaml">Edit</a></p>
<h2 id="extract_event_counts_with_properties-udf">extract_event_counts_with_properties (UDF)</h2>
<p>Extract events with event properties and their associated counts.
Also extracts raw events and their counts. This allows for querying with and without properties in the same dashboard.</p>
<h3 id="usage_2">Usage</h3>
<div class="highlight"><pre><span></span><code>extract_event_counts_with_properties(
    events STRING
)
</code></pre></div>
<p><code>events</code> - A comma-separated events string,
where each event is represented as a string
of unicode chars.</p>
<h3 id="example_1">Example</h3>
<p>See <a href="https://sql.telemetry.mozilla.org/queries/75082">this query</a>
for example usage.</p>
<h3 id="caveats">Caveats</h3>
<p>This function extracts both counts for events with each property,
and for all events without their properties.</p>
<p>This allows us to include both total counts for an event (with any
property value), and events that don't have properties.</p>
<h3 id="parameters_10">Parameters</h3>
<p><strong>INPUTS</strong></p>
<div class="highlight"><pre><span></span><code>events STRING
</code></pre></div>
<p><strong>OUTPUTS</strong></p>
<div class="highlight"><pre><span></span><code>ARRAY&lt;STRUCT&lt;event_index STRING, property_index INT64, property_value_index STRING, count INT64&gt;&gt;
</code></pre></div>
<p><a href="https://github.com/mozilla/bigquery-etl/blob/generated-sql/sql//mozfun/event_analysis/extract_event_counts_with_properties">Source</a>  |  <a href="https://github.com/mozilla/bigquery-etl/edit/generated-sql/sql//mozfun/event_analysis/extract_event_counts_with_properties/metadata.yaml">Edit</a></p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.aecac24b.min.js"></script>
      
    
  </body>
</html>